window.zyplayerDoc = {"env":657,"envList":[],"preview":[{"id":16,"name":"Zpan-部署与配置","preview":"介绍ZPan致力于打造一款不限速的网盘系统，因此我们采用客户端直连云存储的方式进行设计。目前ZPan支持所有兼容S3协议的云存储平台，您可以选用您熟悉的平台来驱动ZPan。他是如何工作的ZPan本质上是一个URL签名服务器+可视化的文件浏览器。因为我们采用直链的方式进行上传下载，所以为了保证上传下载的安全性，客户端用来上传下载的URL均需要服务端进行签名。然后为了能给方便的管理用户上传的文件，我们就需要开发一个可视化的伪文件系统来进行文件管理。saltbo/zpansaltbo/zpan-front特色完全不受服务器带宽限制支持所有兼容S3协议的云存储支持文件及文件夹管理支持文件及文件夹分享（未登录可访问）支持文档预览及音视频播放支持多用户存储空间控制支持多语言"},{"id":17,"name":"保姆级图文","preview":"基于宝塔Docker商店一键安装"},{"id":18,"name":"基本安装","preview":"项目部署 ① 宝塔面板选择Docker菜单 ② 输入 zpan ③ 搜索 zpan ④ 点击安装 ⑤ 填写配置 ⑥ 点击确定，等待部署完成即可Tips根据你设置的访问路径进入安装页面(域名地址:8222 / ip地址:8222) 出现以下页面表示，部署成功教程部署以Docker为例，其他部署方式参见 项目部署创建数据库已有数据库跳过此步配置数据库在安装页面选择对应数据库，这里以Mysql为例DSN原文user:pass@tcp(127.0.0.1:3306)/zpan?charset=utf8mb4&parseTime=True&loc=Local\nDSN白话文数据库用户名:数据库密码@tcp(数据库地址:Mysql端口)/数据库名?charset=utf8mb4&parseTime=True&loc=Local\n设置管理员账号设置好管理员账号，点击开始安装即可注意如果有报错 请检查 数据库配置信息安装成功"},{"id":19,"name":"配置存储","preview":"阿里云OSS腾讯COS七牛云KODO优刻得US3① 登录阿里云，右上角头像选择 访问控制② 新建用户③ 保存AccessKey ID AccessKey Secret备用④ 创建对象存储打开阿里云对象存储 配置存储桶(Bucket) 进入存储桶,记住Bucket名称(存储桶名称)和Endpoint(地域节点)⑤ Zpan创建存储登录zpan后，点头像进入管理后台，右上角创建存储，按提示填入信息注意:外链盘可以直接拿到永久外链，同时它没有分享和回收站的功能腾讯COS七牛KODO优刻得US3"},{"id":20,"name":"项目部署","preview":"宝塔面板LinuxDocker一键安装① 宝塔面板选择Docker菜单 ② 输入 zpan ③ 搜索 zpan ④ 点击安装 ⑤ 填写配置 ⑥ 点击确定，等待部署完成即可安装服务curl -sSLf https://dl.saltbo.cn/install.sh | sh -s zpan\n启动服务systemctl start zpan\n查看服务状态systemctl status zpan\n设置开机启动systemctl enable zpan\n查看日志journalctl -xe -u zpan -f\ndocker run -it -p 8222:8222 -v /etc/zpan:/etc/zpan --name zpan saltbo/zpan\n"},{"id":21,"name":"配置文件","preview":"从v1.5.0版本开始，我们启用了可视化的安装流程，初次安装完成后会生成config.yml的配置文件。如果您需要修改端口或者数据库配置，可以打开该文件进行编辑修改。portHttp端口，默认为8222database这里定义了ZPan的数据库驱动database:\n  driver: sqlite3\n  dsn: zpan.db\ndriver我们支持四种数据库驱动，您可以根据需求进行选择sqlite3mysqlpostgresmssqldsn不同的驱动对应的dsn也是不一样的，这里我们分别给出每种驱动的dsn格式driverdsnsqlite3zpan.dbmysqluser:pass@tcp(127.0.0.1:3306)/zpan?charset=utf8mb4&parseTime=True&loc=Localpostgresuser=zpan password=zpan dbname=zpan port=9920 sslmode=disable TimeZone=Asia/Shanghaimssqlsqlserver://zpan:LoremIpsum86@localhost:9930?database=zpan"},{"id":22,"name":"云存储","preview":"S3协议平台阿里云OSS 腾讯云COS 七牛云Kodo UCloud（需手动自动设置CORS） 华为云OBS 网易云NOS（需手动自动设置CORS） 亚马逊S3 MinIO路径：管理后台-存储管理-创建存储基础配置网盘和外链盘的区别是：外链盘可以直接拿到永久外链，同时它没有分享和回收站的功能名称是在zpan中该存储的名字，同时也是路由地址，所以只支持英文云平台的数据来源于 https://github.com/eplist/eplist ，欢迎PR接入点的数据同样源于eplist，选择一个云平台后会自动给出该平台的所有Endpoint高级配置高级配置默认都可为空标题可以是中文，用于在页面顶部的导航栏显示自有域名即用来访问/下载资源的域名存储根路径指的是在云存储里的存储路径，默认是根目录，指定一个前缀，可以实现共用一个bucket的场景文件存储路径指的是上传的文件在云存储里的存储路径，默认是NOWDATE/NOW_DATE/NOWD​ATE/RAND_16KEY.$RAW_EXT可以看到我们支持一些系统变量，通过这些变量你可以设置自己的路径规则CORS配置Origin: http://your-domainAllowMethods: PUTAllowHeaders: content-type,content-disposition,x-amz-aclMinIO基于MinIO可以快速搭建自己的私有云。需要注意的是，我们仅支持Virtual Hosted-Style模式的S3协议，所以在MinIO搭建时需要注意开启Virtual Hosted-Style。启用的方式很简单，即设置环境变量MINIO_DOMAIN=endpoint.example.com当您创建一个bucket名叫zpan时，它的完整域名是zpan.endpoint.example.com但是，注意，zpan中需要您填写的接入点是不包含bucket的，所以您应该填写endpoint.example.com参考文档：https://docs.min.io/docs/minio-server-configuration-guide.htmlhttps://docs.aws.amazon.com/AmazonS3/latest/userguide/RESTAPI.html又拍云又拍云不兼容s3协议，所以和其他平台有一些区别，需要特别注意Endpoint填写又拍云默认分配的加速域名（仅供测试那个）AccessKey为操作员名称，AccessSecret为操作员密码如果是网盘类型，需要将Token防盗链的秘钥设置为操作员的密码"}],"space":{"name":"Zpan"},"tree":[{"children":[{"children":[{"content":"\n# 项目部署\n\n![004.jpg](./libs/1cde34f31e004c81ae3be60112129a0f.jpg)\n① 宝塔面板选择Docker菜单\n② 输入 zpan\n③ 搜索 zpan\n④ 点击安装\n⑤ 填写配置\n⑥ 点击确定，等待部署完成即可\n::: tip Tips\n\n 根据你设置的访问路径进入安装页面(域名地址:8222 / ip地址:8222)\n 出现以下页面表示，部署成功\n:::\n> 教程部署以Docker为例，其他部署方式参见 [项目部署](/#/integrate/zpan/id/6)\n\n![PixPin_2024-11-01_11-47-53.jpg](./libs/41791a92909a4433b9cac9c3d138dbbc.jpg)\n\n# 创建数据库\n已有数据库跳过此步\n![004.jpg](doc-wiki/common/file?uuid=kXzylFHrhU34MZbN3aOoNf)\n\n\n# 配置数据库\n\n> 在安装页面选择对应数据库，这里以Mysql为例\n\n###### DSN原文\n```bash\nuser:pass@tcp(127.0.0.1:3306)/zpan?charset=utf8mb4&parseTime=True&loc=Local\n```\n###### DSN白话文\n```bash\n数据库用户名:数据库密码@tcp(数据库地址:Mysql端口)/数据库名?charset=utf8mb4&parseTime=True&loc=Local\n```\n\n\n\n# 设置管理员账号\n设置好管理员账号，点击开始安装即可\n::: danger 注意\n如果有报错 请检查 数据库配置信息\n:::\n\n![002.jpg](./libs/7cb93cce4e3c4fe09e97b191cc8a167c.jpg)\n\n# 安装成功\n![003.jpg](./libs/3d0d5f06adf34179a179face5ae871be.jpg)\n\n","editorType":2,"id":18,"name":"基本安装"},{"content":"\n\n\n\n<CodeGroup>\n  <CodeGroupItem title=\"阿里云OSS\" active>\n\n\n① **登录阿里云，右上角头像选择 ==访问控制==**\n![005.jpg](./libs/881bcd8d926f48c195b9cde79ab08e20.jpg)\n\n② **新建用户**\n\n\n![006.jpg](./libs/ed871a12f27649c69d22139074901272.jpg)\n\n![007.jpg](./libs/d56a1e462671435482b0cc6221e3a1ef.jpg)\n\n③ **保存AccessKey ID AccessKey Secret备用**\n\n![008.jpg](./libs/7db1330960fd425eb0e6c13b13a02d37.jpg)\n\n④ **创建对象存储**\n\n打开阿里云[对象存储](https://oss.console.aliyun.com/)\n![009.jpg](./libs/ee5d61d562ca42339140e1818eadb6e3.jpg)\n配置存储桶(Bucket)\n![010.jpg](./libs/7d009dea17d548afb41a94f11e965fb1.jpg)\n进入存储桶,记住Bucket名称(存储桶名称)和Endpoint(地域节点)\n![011.jpg](./libs/ad425c2e9a43440c946d3403176ef91b.jpg)\n\n⑤ **Zpan创建存储**\n\n登录zpan后，点头像进入管理后台，右上角创建存储，按提示填入信息\n![012.jpg](./libs/82a6f9fc5c1b4d2da8cfd1516ac6d67f.jpg)\n> `注意:外链盘可以直接拿到永久外链，同时它没有分享和回收站的功能`\n\n\n\n  </CodeGroupItem>\n\n\n\n\n\n\n  <CodeGroupItem title=\"腾讯COS\">\n\n\n\n腾讯COS\n\n  </CodeGroupItem>\n\n\n\n\n\n\n  <CodeGroupItem title=\"七牛云KODO\">\n\n\n七牛KODO\n\n  </CodeGroupItem>\n\n\n\n\n\n  <CodeGroupItem title=\"优刻得US3\">\n\n\n\n优刻得US3\n  </CodeGroupItem>\n</CodeGroup>\n","editorType":2,"id":19,"name":"配置存储"}],"content":"\n\n::: hljs-center\n基于宝塔Docker商店一键安装\n:::\n\n","editorType":2,"id":17,"name":"保姆级图文"},{"content":"\n\n<CodeGroup>\n\n\n<CodeGroupItem title=\"宝塔面板\" active>\n\n\n\n一键安装\n\n![004.jpg](./libs/cb6056a548c04ea4ab1ad07e82831df7.jpg)\n\n\n①\t宝塔面板选择Docker菜单\n②\t输入 zpan\n③\t搜索 zpan\n④\t点击安装\n⑤\t填写配置\n⑥\t点击确定，等待部署完成即可\n\n</CodeGroupItem>\n\n<CodeGroupItem title=\"Linux\">\n\n安装服务\n```bash\ncurl -sSLf https://dl.saltbo.cn/install.sh | sh -s zpan\n```\n启动服务\n```bash\nsystemctl start zpan\n```\n查看服务状态\n```bash\nsystemctl status zpan\n```\n设置开机启动\n```bash\nsystemctl enable zpan\n```\n查看日志\n```bash\njournalctl -xe -u zpan -f\n```\n</CodeGroupItem>\n\n\n<CodeGroupItem title=\"Docker\">\n\n```bash\ndocker run -it -p 8222:8222 -v /etc/zpan:/etc/zpan --name zpan saltbo/zpan\n```\n  </CodeGroupItem>\n\n\n</CodeGroup>\n\n\n","editorType":2,"id":20,"name":"项目部署"},{"content":"从v1.5.0版本开始，我们启用了可视化的安装流程，初次安装完成后会生成config.yml的配置文件。如果您需要修改端口或者数据库配置，可以打开该文件进行编辑修改。\n\n## port\n\nHttp端口，默认为8222\n\n## database\n\n这里定义了ZPan的数据库驱动\n\n```\ndatabase:\n  driver: sqlite3\n  dsn: zpan.db\n```\n\n### driver\n\n我们支持四种数据库驱动，您可以根据需求进行选择\n\n-   sqlite3\n-   mysql\n-   postgres\n-   mssql\n\n### dsn\n\n不同的驱动对应的dsn也是不一样的，这里我们分别给出每种驱动的dsn格式\n\n|driver|dsn|\n|-|-|\n|sqlite3|zpan.db|\n|mysql|user:pass@tcp(127.0.0.1:3306)/zpan?charset=utf8mb4&parseTime=True&loc=Local|\n|postgres|user=zpan password=zpan dbname=zpan port=9920 sslmode=disable TimeZone=Asia/Shanghai|\n|mssql|sqlserver://zpan:LoremIpsum86@localhost:9930?database=zpan|","editorType":2,"id":21,"name":"配置文件"},{"content":"\n## S3协议平台\n阿里云OSS\n腾讯云COS\n七牛云Kodo\nUCloud（需手动自动设置CORS）\n华为云OBS\n网易云NOS（需手动自动设置CORS）\n亚马逊S3\nMinIO\n\n\n==路径：管理后台-存储管理-创建存储==\n\n\n### 基础配置\n\n![image.png](./libs/ddcb7f1900b9443da075f333d7d9978e.png)\n\n1.  网盘和外链盘的区别是：外链盘可以直接拿到永久外链，同时它没有分享和回收站的功能\n2.  名称是在zpan中该存储的名字，同时也是路由地址，所以只支持英文\n3.  云平台的数据来源于 [https://github.com/eplist/eplist](https://github.com/eplist/eplist) ，欢迎PR\n4.  接入点的数据同样源于eplist，选择一个云平台后会自动给出该平台的所有Endpoint\n\n### 高级配置\n\n![image.png](./libs/61fc4f6dfa964659adb5062ce23c4ae5.png)\n\n1.  高级配置默认都可为空\n2.  标题可以是中文，用于在页面顶部的导航栏显示\n3.  自有域名即用来访问/下载资源的域名\n4.  存储根路径指的是在云存储里的存储路径，默认是根目录，指定一个前缀，可以实现共用一个bucket的场景\n5.  文件存储路径指的是上传的文件在云存储里的存储路径，默认是$NOW_DATE/$RAND_16KEY.$RAW_EXT\n6.  可以看到我们支持一些系统变量，通过这些变量你可以设置自己的路径规则\n\n### CORS配置\n\n-   Origin: [http://your-domain](http://your-domain/)\n-   AllowMethods: PUT\n-   AllowHeaders: content-type,content-disposition,x-amz-acl\n\n## MinIO\n\n基于MinIO可以快速搭建自己的私有云。\n\n需要注意的是，我们仅支持Virtual Hosted-Style模式的S3协议，所以在MinIO搭建时需要注意开启Virtual Hosted-Style。\n\n启用的方式很简单，即设置环境变量MINIO_DOMAIN=endpoint.example.com\n\n当您创建一个bucket名叫zpan时，它的完整域名是zpan.endpoint.example.com\n\n但是，注意，**zpan中需要您填写的接入点是不包含bucket的，所以您应该填写endpoint.example.com**\n\n#### 参考文档：\n\n-   [https://docs.min.io/docs/minio-server-configuration-guide.html](https://docs.min.io/docs/minio-server-configuration-guide.html)\n-   [https://docs.aws.amazon.com/AmazonS3/latest/userguide/RESTAPI.html](https://docs.aws.amazon.com/AmazonS3/latest/userguide/RESTAPI.html)\n\n## 又拍云\n\n又拍云不兼容s3协议，所以和其他平台有一些区别，需要特别注意\n\n1.  Endpoint填写又拍云默认分配的加速域名（仅供测试那个）\n2.  AccessKey为操作员名称，AccessSecret为操作员密码\n3.  **如果是网盘类型，需要将Token防盗链的秘钥设置为操作员的密码**\n\n![image.png](./libs/d4d01e0110f04b01b2ed7cb2cdf78f4a.png)![image.png](./libs/fbb94a83d94e4ff7875fcd4c5fc9100a.png)\n\n![image.png](./libs/c3308290f6574adcb820893f023d30fe.png)\n\n","editorType":2,"id":22,"name":"云存储"}],"content":"### 介绍\n\nZPan致力于打造一款不限速的网盘系统，因此我们采用客户端直连云存储的方式进行设计。\n\n目前ZPan支持所有兼容S3协议的云存储平台，您可以选用您熟悉的平台来驱动ZPan。\n\n\n\n### 他是如何工作的\n\nZPan本质上是一个URL签名服务器+可视化的文件浏览器。\n\n因为我们采用直链的方式进行上传下载，所以为了保证上传下载的安全性，客户端用来上传下载的URL均需要服务端进行签名。\n\n然后为了能给方便的管理用户上传的文件，我们就需要开发一个可视化的伪文件系统来进行文件管理。\n\n-   [saltbo/zpan](https://github.com/saltbo/zpan)\n-   [saltbo/zpan-front](https://github.com/saltbo/zpan-front)\n\n### 特色\n\n-   完全不受服务器带宽限制\n-   支持所有兼容S3协议的云存储\n-   支持文件及文件夹管理\n-   支持文件及文件夹分享（未登录可访问）\n-   支持文档预览及音视频播放\n-   支持多用户存储空间控制\n-   支持多语言\n\n","editorType":2,"id":16,"name":"Zpan-部署与配置"}]}