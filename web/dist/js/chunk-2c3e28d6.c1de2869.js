(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2c3e28d6"],{"14fd":function(e,t,n){var s,o;
/*! PhotoSwipe Default UI - 4.1.3 - 2019-01-08
* http://photoswipe.com
* Copyright (c) 2019 Dmitry Semenov; */(function(i,a){s=a,o="function"===typeof s?s.call(t,n,t,e):s,void 0===o||(e.exports=o)})(0,(function(){"use strict";var e=function(e,t){var n,s,o,i,a,l,r,c,u,p,d,m,h,f,v,w,_,b,g=this,y=!1,C=!0,$=!0,k={barsSize:{top:44,bottom:"auto"},closeElClasses:["item","caption","zoom-wrap","ui","top-bar"],timeToIdle:4e3,timeToIdleOutside:1e3,loadingIndicatorDelay:1e3,addCaptionHTMLFn:function(e,t){return e.title?(t.children[0].innerHTML=e.title,!0):(t.children[0].innerHTML="",!1)},closeEl:!0,captionEl:!0,fullscreenEl:!0,zoomEl:!0,shareEl:!0,counterEl:!0,arrowEl:!0,preloaderEl:!0,tapToClose:!1,tapToToggleControls:!0,clickToCloseNonZoomable:!0,shareButtons:[{id:"facebook",label:"Share on Facebook",url:"https://www.facebook.com/sharer/sharer.php?u={{url}}"},{id:"twitter",label:"Tweet",url:"https://twitter.com/intent/tweet?text={{text}}&url={{url}}"},{id:"pinterest",label:"Pin it",url:"http://www.pinterest.com/pin/create/button/?url={{url}}&media={{image_url}}&description={{text}}"},{id:"download",label:"Download image",url:"{{raw_image_url}}",download:!0}],getImageURLForShare:function(){return e.currItem.src||""},getPageURLForShare:function(){return window.location.href},getTextForShare:function(){return e.currItem.title||""},indexIndicatorSep:" / ",fitControlsWidth:1200},x=function(e){if(w)return!0;e=e||window.event,v.timeToIdle&&v.mouseUsed&&!u&&B();for(var n,s,o=e.target||e.srcElement,i=o.getAttribute("class")||"",a=0;a<M.length;a++)n=M[a],n.onTap&&i.indexOf("pswp__"+n.name)>-1&&(n.onTap(),s=!0);if(s){e.stopPropagation&&e.stopPropagation(),w=!0;var l=t.features.isOldAndroid?600:30;setTimeout((function(){w=!1}),l)}},F=function(){return!e.likelyTouchDevice||v.mouseUsed||screen.width>v.fitControlsWidth},T=function(e,n,s){t[(s?"add":"remove")+"Class"](e,"pswp__"+n)},E=function(){var e=1===v.getNumItemsFn();e!==f&&(T(s,"ui--one-slide",e),f=e)},I=function(){T(r,"share-modal--hidden",$)},S=function(){return $=!$,$?(t.removeClass(r,"pswp__share-modal--fade-in"),setTimeout((function(){$&&I()}),300)):(I(),setTimeout((function(){$||t.addClass(r,"pswp__share-modal--fade-in")}),30)),$||z(),!1},O=function(t){t=t||window.event;var n=t.target||t.srcElement;return e.shout("shareLinkClick",t,n),!!n.href&&(!!n.hasAttribute("download")||(window.open(n.href,"pswp_share","scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=550,height=420,top=100,left="+(window.screen?Math.round(screen.width/2-275):100)),$||S(),!1))},z=function(){for(var e,t,n,s,o,i="",a=0;a<v.shareButtons.length;a++)e=v.shareButtons[a],n=v.getImageURLForShare(e),s=v.getPageURLForShare(e),o=v.getTextForShare(e),t=e.url.replace("{{url}}",encodeURIComponent(s)).replace("{{image_url}}",encodeURIComponent(n)).replace("{{raw_image_url}}",n).replace("{{text}}",encodeURIComponent(o)),i+='<a href="'+t+'" target="_blank" class="pswp__share--'+e.id+'"'+(e.download?"download":"")+">"+e.label+"</a>",v.parseShareButtonOut&&(i=v.parseShareButtonOut(e,i));r.children[0].innerHTML=i,r.children[0].onclick=O},L=function(e){for(var n=0;n<v.closeElClasses.length;n++)if(t.hasClass(e,"pswp__"+v.closeElClasses[n]))return!0},q=0,B=function(){clearTimeout(b),q=0,u&&g.setIdle(!1)},R=function(e){e=e||window.event;var t=e.relatedTarget||e.toElement;t&&"HTML"!==t.nodeName||(clearTimeout(b),b=setTimeout((function(){g.setIdle(!0)}),v.timeToIdleOutside))},K=function(){v.fullscreenEl&&!t.features.isOldAndroid&&(n||(n=g.getFullscreenAPI()),n?(t.bind(document,n.eventK,g.updateFullscreen),g.updateFullscreen(),t.addClass(e.template,"pswp--supports-fs")):t.removeClass(e.template,"pswp--supports-fs"))},D=function(){v.preloaderEl&&(P(!0),p("beforeChange",(function(){clearTimeout(h),h=setTimeout((function(){e.currItem&&e.currItem.loading?(!e.allowProgressiveImg()||e.currItem.img&&!e.currItem.img.naturalWidth)&&P(!1):P(!0)}),v.loadingIndicatorDelay)})),p("imageLoadComplete",(function(t,n){e.currItem===n&&P(!0)})))},P=function(e){m!==e&&(T(d,"preloader--active",!e),m=e)},A=function(e){var n=e.vGap;if(F()){var a=v.barsSize;if(v.captionEl&&"auto"===a.bottom)if(i||(i=t.createEl("pswp__caption pswp__caption--fake"),i.appendChild(t.createEl("pswp__caption__center")),s.insertBefore(i,o),t.addClass(s,"pswp__ui--fit")),v.addCaptionHTMLFn(e,i,!0)){var l=i.clientHeight;n.bottom=parseInt(l,10)||44}else n.bottom=a.top;else n.bottom="auto"===a.bottom?0:a.bottom;n.top=a.top}else n.top=n.bottom=0},N=function(){v.timeToIdle&&p("mouseUsed",(function(){t.bind(document,"mousemove",B),t.bind(document,"mouseout",R),_=setInterval((function(){q++,2===q&&g.setIdle(!0)}),v.timeToIdle/2)}))},U=function(){var e;p("onVerticalDrag",(function(e){C&&e<.95?g.hideControls():!C&&e>=.95&&g.showControls()})),p("onPinchClose",(function(t){C&&t<.9?(g.hideControls(),e=!0):e&&!C&&t>.9&&g.showControls()})),p("zoomGestureEnded",(function(){e=!1,e&&!C&&g.showControls()}))},M=[{name:"caption",option:"captionEl",onInit:function(e){o=e}},{name:"share-modal",option:"shareEl",onInit:function(e){r=e},onTap:function(){S()}},{name:"button--share",option:"shareEl",onInit:function(e){l=e},onTap:function(){S()}},{name:"button--zoom",option:"zoomEl",onTap:e.toggleDesktopZoom},{name:"counter",option:"counterEl",onInit:function(e){a=e}},{name:"button--close",option:"closeEl",onTap:e.close},{name:"button--arrow--left",option:"arrowEl",onTap:e.prev},{name:"button--arrow--right",option:"arrowEl",onTap:e.next},{name:"button--fs",option:"fullscreenEl",onTap:function(){n.isFullscreen()?n.exit():n.enter()}},{name:"preloader",option:"preloaderEl",onInit:function(e){d=e}}],Z=function(){var e,n,o,i=function(s){if(s)for(var i=s.length,a=0;a<i;a++){e=s[a],n=e.className;for(var l=0;l<M.length;l++)o=M[l],n.indexOf("pswp__"+o.name)>-1&&(v[o.option]?(t.removeClass(e,"pswp__element--disabled"),o.onInit&&o.onInit(e)):t.addClass(e,"pswp__element--disabled"))}};i(s.children);var a=t.getChildByClass(s,"pswp__top-bar");a&&i(a.children)};g.init=function(){t.extend(e.options,k,!0),v=e.options,s=t.getChildByClass(e.scrollWrap,"pswp__ui"),p=e.listen,U(),p("beforeChange",g.update),p("doubleTap",(function(t){var n=e.currItem.initialZoomLevel;e.getZoomLevel()!==n?e.zoomTo(n,t,333):e.zoomTo(v.getDoubleTapZoom(!1,e.currItem),t,333)})),p("preventDragEvent",(function(e,t,n){var s=e.target||e.srcElement;s&&s.getAttribute("class")&&e.type.indexOf("mouse")>-1&&(s.getAttribute("class").indexOf("__caption")>0||/(SMALL|STRONG|EM)/i.test(s.tagName))&&(n.prevent=!1)})),p("bindEvents",(function(){t.bind(s,"pswpTap click",x),t.bind(e.scrollWrap,"pswpTap",g.onGlobalTap),e.likelyTouchDevice||t.bind(e.scrollWrap,"mouseover",g.onMouseOver)})),p("unbindEvents",(function(){$||S(),_&&clearInterval(_),t.unbind(document,"mouseout",R),t.unbind(document,"mousemove",B),t.unbind(s,"pswpTap click",x),t.unbind(e.scrollWrap,"pswpTap",g.onGlobalTap),t.unbind(e.scrollWrap,"mouseover",g.onMouseOver),n&&(t.unbind(document,n.eventK,g.updateFullscreen),n.isFullscreen()&&(v.hideAnimationDuration=0,n.exit()),n=null)})),p("destroy",(function(){v.captionEl&&(i&&s.removeChild(i),t.removeClass(o,"pswp__caption--empty")),r&&(r.children[0].onclick=null),t.removeClass(s,"pswp__ui--over-close"),t.addClass(s,"pswp__ui--hidden"),g.setIdle(!1)})),v.showAnimationDuration||t.removeClass(s,"pswp__ui--hidden"),p("initialZoomIn",(function(){v.showAnimationDuration&&t.removeClass(s,"pswp__ui--hidden")})),p("initialZoomOut",(function(){t.addClass(s,"pswp__ui--hidden")})),p("parseVerticalMargin",A),Z(),v.shareEl&&l&&r&&($=!0),E(),N(),K(),D()},g.setIdle=function(e){u=e,T(s,"ui--idle",e)},g.update=function(){C&&e.currItem?(g.updateIndexIndicator(),v.captionEl&&(v.addCaptionHTMLFn(e.currItem,o),T(o,"caption--empty",!e.currItem.title)),y=!0):y=!1,$||S(),E()},g.updateFullscreen=function(s){s&&setTimeout((function(){e.setScrollOffset(0,t.getScrollY())}),50),t[(n.isFullscreen()?"add":"remove")+"Class"](e.template,"pswp--fs")},g.updateIndexIndicator=function(){v.counterEl&&(a.innerHTML=e.getCurrentIndex()+1+v.indexIndicatorSep+v.getNumItemsFn())},g.onGlobalTap=function(n){n=n||window.event;var s=n.target||n.srcElement;if(!w)if(n.detail&&"mouse"===n.detail.pointerType){if(L(s))return void e.close();t.hasClass(s,"pswp__img")&&(1===e.getZoomLevel()&&e.getZoomLevel()<=e.currItem.fitRatio?v.clickToCloseNonZoomable&&e.close():e.toggleDesktopZoom(n.detail.releasePoint))}else if(v.tapToToggleControls&&(C?g.hideControls():g.showControls()),v.tapToClose&&(t.hasClass(s,"pswp__img")||L(s)))return void e.close()},g.onMouseOver=function(e){e=e||window.event;var t=e.target||e.srcElement;T(s,"ui--over-close",L(t))},g.hideControls=function(){t.addClass(s,"pswp__ui--hidden"),C=!1},g.showControls=function(){C=!0,y||g.update(),t.removeClass(s,"pswp__ui--hidden")},g.supportsFullscreen=function(){var e=document;return!!(e.exitFullscreen||e.mozCancelFullScreen||e.webkitExitFullscreen||e.msExitFullscreen)},g.getFullscreenAPI=function(){var t,n=document.documentElement,s="fullscreenchange";return n.requestFullscreen?t={enterK:"requestFullscreen",exitK:"exitFullscreen",elementK:"fullscreenElement",eventK:s}:n.mozRequestFullScreen?t={enterK:"mozRequestFullScreen",exitK:"mozCancelFullScreen",elementK:"mozFullScreenElement",eventK:"moz"+s}:n.webkitRequestFullscreen?t={enterK:"webkitRequestFullscreen",exitK:"webkitExitFullscreen",elementK:"webkitFullscreenElement",eventK:"webkit"+s}:n.msRequestFullscreen&&(t={enterK:"msRequestFullscreen",exitK:"msExitFullscreen",elementK:"msFullscreenElement",eventK:"MSFullscreenChange"}),t&&(t.enter=function(){if(c=v.closeOnScroll,v.closeOnScroll=!1,"webkitRequestFullscreen"!==this.enterK)return e.template[this.enterK]();e.template[this.enterK](Element.ALLOW_KEYBOARD_INPUT)},t.exit=function(){return v.closeOnScroll=c,document[this.exitK]()},t.isFullscreen=function(){return document[this.elementK]}),t}};return e}))},"343a":function(e,t,n){},"3fb5":function(e,t,n){},"55ac":function(e,t,n){"use strict";n("7a36")},6275:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var s=n("8bbf"),o=n.n(s),i=n("9225"),a=n("c0d6"),l=n("41cb");const r=e=>{const t=o.a.extend(e);return function(e={}){console.log(e);let n=new t({i18n:i["a"],store:a["a"],router:l["a"],propsData:e}).$mount(document.createElement("div"));return new Promise((e,t)=>{n.$once("completed",t=>e(t)),n.$once("cancel",e=>t(e))})}}},"7a36":function(e,t,n){},"8c4f":function(e,t,n){"use strict";n("cf55")},"8e6b":function(e,t,n){"use strict";var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-dialog",{attrs:{title:e.$t("dialog.outlink-title"),visible:e.visible},on:{"update:visible":function(t){e.visible=t}}},[n("div",[n("el-input",{attrs:{type:"textarea",rows:20},model:{value:e.links,callback:function(t){e.links=t},expression:"links"}})],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"}},[e._v(e._s(e.$t("click-copy-link")))]),n("el-button",{on:{click:function(t){e.visible=!1}}},[e._v(e._s(e.$t("op.close")))])],1)])],1)},o=[],i=n("ebbf"),a={mixins:[i["b"]],props:{items:Array},data(){return{links:""}},methods:{loadLinks(){Promise.all(this.items.map(e=>this.$zpan.File.get(e.alias))).then(e=>{e.forEach(e=>{this.links+=e.url+"\r\n"})})}},mounted(){this.loadLinks()}},l=a,r=n("2877"),c=Object(r["a"])(l,s,o,!1,null,"ffee72ca",null);t["a"]=c.exports},cf55:function(e,t,n){},db7e:function(e,t,n){"use strict";n.r(t);var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{height:"calc(100% - 58px)"}},[n("el-row",{staticClass:"toolbar"},[n("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-upload"},on:{click:function(t){return e.onUploadSelect("file")}}},[e._v("\n      "+e._s(e.$t("uploader.file"))+"\n    ")]),n("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-folder-opened",disabled:!e.$store.state.uploader.dirUploadSupport},on:{click:function(t){return e.onUploadSelect("folder")}}},[e._v("\n      "+e._s(e.$t("uploader.folder"))+"\n    ")]),n("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-folder-add",plain:""},on:{click:function(t){return e.openCreateDiglog()}}},[e._v("\n      "+e._s(e.$t("uploader.new-folder"))+"\n    ")]),n("el-button-group",{directives:[{name:"show",rawName:"v-show",value:e.selectedItems.length>0,expression:"selectedItems.length > 0"}],staticStyle:{"margin-left":"10px"}},[n("el-button",{attrs:{type:"primary",icon:"el-icon-download",size:"medium",plain:""},on:{click:e.onOutlinkClick}},[e._v(e._s(e.$t("disk.download")))]),n("el-button",{attrs:{type:"primary",icon:"el-icon-delete",size:"medium",plain:""},on:{click:e.deleteSelection}},[e._v(e._s(e.$t("disk.delete")))])],1),n("div",{staticStyle:{float:"right"}},[n("el-input",{staticClass:"search",attrs:{size:"small",placeholder:e.$t("topbar.search")},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.listRefresh.apply(null,arguments)}},model:{value:e.query.kw,callback:function(t){e.$set(e.query,"kw",t)},expression:"query.kw"}},[n("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"})]),"list"==e.layout?n("i",{staticClass:"iconfont icon-grid",on:{click:function(t){e.layout="grid"}}}):n("i",{staticClass:"iconfont icon-list",on:{click:function(t){e.layout="list"}}})],1)],1),n("FileExplorer",{ref:"fexp",attrs:{layout:e.layout,dataLoader:e.dataLoader,linkLoader:e.linkLoader,rowButtons:e.rowButtons,moreButtons:e.moreButtons},on:{"file-open":e.onFileOpen,"selection-change":e.onSelectionChange}})],1)},o=[],i=n("6275"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{title:e.title,visible:e.show,width:"30%"},on:{"update:visible":function(t){e.show=t},opened:e.onOpen,close:e.onClose}},[n("vue-plyr",{directives:[{name:"show",rawName:"v-show",value:"audio"==e.mediatype,expression:"mediatype == 'audio'"}],ref:"audio"},[n("audio",{attrs:{src:e.url}})]),n("vue-plyr",{directives:[{name:"show",rawName:"v-show",value:"video"==e.mediatype,expression:"mediatype == 'video'"}],ref:"video"},[n("video",{attrs:{src:e.url}})])],1)},l=[],r=n("ebbf"),c={mixins:[r["b"]],props:{title:String,type:String,url:String},data(){return{show:!1}},watch:{visible(e,t){this.show=e}},methods:{onOpen(){this.player.play()},onClose(){this.$emit("close"),console.log(this.player),this.player.stop()}},computed:{filetype(){return this.type?this.type:""},mediatype(){return this.filetype.split("/")[0]},player(){return this.$refs[this.mediatype].player}}},u=c,p=n("2877"),d=Object(p["a"])(u,a,l,!1,null,null,null),m=d.exports,h=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},f=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"pswp",attrs:{tabindex:"0",role:"dialog","aria-hidden":"true"}},[n("div",{staticClass:"pswp__bg"}),n("div",{staticClass:"pswp__scroll-wrap"},[n("div",{staticClass:"pswp__container"},[n("div",{staticClass:"pswp__item"}),n("div",{staticClass:"pswp__item"}),n("div",{staticClass:"pswp__item"})]),n("div",{staticClass:"pswp__ui pswp__ui--hidden"},[n("div",{staticClass:"pswp__top-bar"},[n("div",{staticClass:"pswp__counter"}),n("button",{staticClass:"pswp__button pswp__button--close",attrs:{title:"Close (Esc)"}}),n("button",{staticClass:"pswp__button pswp__button--share",attrs:{title:"Share"}}),n("button",{staticClass:"pswp__button pswp__button--fs",attrs:{title:"Toggle fullscreen"}}),n("button",{staticClass:"pswp__button pswp__button--zoom",attrs:{title:"Zoom in/out"}}),n("div",{staticClass:"pswp__preloader"},[n("div",{staticClass:"pswp__preloader__icn"},[n("div",{staticClass:"pswp__preloader__cut"},[n("div",{staticClass:"pswp__preloader__donut"})])])])]),n("div",{staticClass:"pswp__share-modal pswp__share-modal--hidden pswp__single-tap"},[n("div",{staticClass:"pswp__share-tooltip"})]),n("button",{staticClass:"pswp__button pswp__button--arrow--left",attrs:{title:"Previous (arrow left)"}}),n("button",{staticClass:"pswp__button pswp__button--arrow--right",attrs:{title:"Next (arrow right)"}}),n("div",{staticClass:"pswp__caption"},[n("div",{staticClass:"pswp__caption__center"})])])])])}],v=n("1914"),w=n.n(v),_=n("14fd"),b=n.n(_),g=(n("343a"),n("3fb5"),{mixins:[r["b"]],name:"PhotoPreview",props:{url:String},methods:{open(){var e=[{src:this.url,w:600,h:400}],t={index:0},n=document.querySelectorAll(".pswp")[0],s=new w.a(n,b.a,e,t);s.init()}},mounted(){this.open()}}),y=g,C=Object(p["a"])(y,h,f,!1,null,"1a884464",null),$=C.exports;class k{view(e,t,n){switch(e){case"media":Object(i["a"])(m)({title:t.name,url:n,type:t.type});break;case"image":Object(i["a"])($)({title:t.name,url:n});break;case"pdf":window.open(`/viewer/pdf?link=${encodeURIComponent(n)}&title=${t.name}`,"_blank");break;case"doc":window.open("http://view.officeapps.live.com/op/view.aspx?src="+encodeURIComponent(n));break;case"text":window.open("/f/editor?alias="+t.alias,"_blank");break;default:console.log(e,t,n)}}}var x=k,F=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-dialog",{attrs:{title:e.$t("dialog.moveto-title"),width:"30%",visible:e.visible},on:{"update:visible":function(t){e.visible=t}}},[n("el-tree",{attrs:{data:e.data,props:e.props,"node-key":"id","current-node-key":e.current.id,"default-expanded-keys":[0],load:e.loadNode,"highlight-current":!0,lazy:""},on:{"current-change":e.onCurrentChange},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.node;return n("span",{staticClass:"custom-tree-node"},[n("span",[n("i",{staticClass:"el-icon-folder"}),e._v("\n          "+e._s(s.label)+"\n        ")])])}}])}),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v(e._s(e.$t("op.confirm")))]),n("el-button",{on:{click:function(t){e.visible=!1}}},[e._v(e._s(e.$t("op.cancel")))])],1)],1)],1)},T=[],E={mixins:[r["a"],r["b"]],props:{alias:String,isDir:Boolean},data(){return{data:[],props:{label:"name",children:"folders",isLeaf:"leaf"},current:{},treectx:{}}},methods:{onCurrentChange(e,t){this.current=e},loadNode(e,t){0!==e.level?(this.treectx.node||1!==e.level||(this.treectx.node=e,this.treectx.resolve=t),this.$zpan.File.list({sid:this.getSid(),dir:e.data.fullpath}).then(e=>{let n=e.list.filter(e=>e.dirtype&&e.alias!=this.alias);t(n)})):t([{id:0,name:"/",parent:""}])},submit(){this.$zpan.File.move(this.alias,this.current.fullpath).then(e=>{this.$message({type:"success",message:this.$t("msg.move-success")}),this.finish(),this.close()})}}},I=E,S=(n("55ac"),Object(p["a"])(I,F,T,!1,null,"6144c87d",null)),O=S.exports,z=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-dialog",{attrs:{title:e.$t("dialog.share-title"),width:e.shareForm.width,visible:e.visible},on:{"update:visible":function(t){e.visible=t}}},[n("el-form",{directives:[{name:"show",rawName:"v-show",value:!e.shareForm.done,expression:"!shareForm.done"}]},[n("el-form-item",{staticStyle:{"margin-left":"20px"},attrs:{label:e.$t("dialog.share-drawcode-switch")}},[n("el-switch",{model:{value:e.shareForm.private,callback:function(t){e.$set(e.shareForm,"private",t)},expression:"shareForm.private"}})],1),n("el-form-item",{staticStyle:{"margin-left":"20px"},attrs:{label:e.$t("dialog.share-expire-time")}},[n("el-select",{model:{value:e.shareForm.expire_sec,callback:function(t){e.$set(e.shareForm,"expire_sec",t)},expression:"shareForm.expire_sec"}},[n("el-option",{attrs:{label:"7 "+e.$t("day"),value:604800}}),n("el-option",{attrs:{label:"30 "+e.$t("day"),value:2592e3}}),n("el-option",{attrs:{label:"1 "+e.$t("year"),value:31536e3}}),n("el-option",{attrs:{label:"永久",value:31536e5}})],1)],1)],1),n("div",{directives:[{name:"show",rawName:"v-show",value:e.shareForm.done,expression:"shareForm.done"}],staticStyle:{"margin-left":"50px","line-height":"30px"}},[n("p",[e._v("\n        "+e._s(e.$t("dialog.share-link"))+"：\n        "),n("a",{attrs:{href:e.shareForm.link,target:"_blank"}},[e._v(e._s(e.shareForm.link))])]),e.shareForm.secret?n("p",[e._v(e._s(e.$t("dialog.share-drawcode"))+"："+e._s(e.shareForm.secret))]):e._e()]),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e.shareForm.done?n("div",[n("el-button",{staticClass:"copy-link",attrs:{type:"primary","data-clipboard-text":e.shareForm.link},on:{click:e.close}},[e._v(e._s(e.$t("click-copy-link")))]),n("el-button",{on:{click:e.close}},[e._v(e._s(e.$t("op.close")))])],1):n("div",[n("el-button",{on:{click:e.close}},[e._v(e._s(e.$t("op.cancel")))]),n("el-button",{attrs:{type:"primary"},on:{click:e.share}},[e._v(e._s(e.$t("op.confirm")))])],1)])],1)],1)},L=[],q={mixins:[r["b"]],props:{alias:String},data(){return{shareForm:{done:!1,width:"30%",private:!1,expire_sec:604800}}},methods:{share(e){this.$zpan.Share.create(this.shareForm).then(e=>{let t=window.location.origin,n=e.data.alias;this.shareForm.done=!0,this.shareForm.link=`${t}/s/${n}`,this.shareForm.secret=e.data.secret})}},mounted(){this.shareForm.matter=this.alias}},B=q,R=Object(p["a"])(B,z,L,!1,null,"3d33c360",null),K=R.exports,D=n("8e6b");function P(e){let t=0;return n=>{t>0&&clearTimeout(t),t=setTimeout(()=>n(),e)}}var A={mixins:[r["a"]],data(){return{query:{kw:"",dir:""},layout:"list",folderBtnShown:!1,moreButtons:[{name:"move",title:this.$t("ftb.move"),action:this.move},{name:"rename",title:this.$t("ftb.rename"),action:this.rename},{name:"remove",title:this.$t("ftb.remove"),action:this.remove}],selectedItems:[],delay:P(2e3)}},watch:{$route(e,t){this.query.type=e.query.type,this.folderBtnShown=!this.query.type},"$store.state.uploader.successCount"(e,t){this.listRefresh()}},computed:{rowButtons(){return 1==this.cs.mode?[{name:"download",icon:"el-icon-download",action:this.openDownload,shown:e=>!e.dirtype},{name:"share",icon:"el-icon-share",action:this.share}]:[{name:"download",icon:"el-icon-download",action:this.openDownload,shown:e=>!e.dirtype},{name:"viewlink",icon:"el-icon-view",action:this.viewlink}]}},methods:{dataLoader(e,t,n){return e!=this.query.dir&&(this.query.dir=e),this.query.sid=this.getSid(),this.query.offset=t||0,this.query.limit=n||10,new Promise((e,t)=>{this.$zpan.File.list(this.query).then(t=>{this.query.kw="",e(t)})})},linkLoader(e){return new Promise((t,n)=>{this.$zpan.File.get(e.alias).then(e=>{t(e.url)}).catch(n)})},listRefresh(){this.delay(this.$refs.fexp.listRefresh)},openDownload(e){this.linkLoader(e).then(t=>{let n=document.createElement("a");n.setAttribute("href",t),n.setAttribute("download",e.name),n.click(),n.remove()})},openCreateDiglog(){this.$prompt(this.$t("tips.create-folder"),this.$t("create-folder"),{confirmButtonText:this.$t("op.confirm"),cancelButtonText:this.$t("op.cancel")}).then(({value:e})=>this.$zpan.File.createDir(this.getSid(),e,this.query.dir)).then(e=>this.$message({type:"success",message:this.$t("msg.create-success")})).finally(()=>this.listRefresh())},onUploadSelect(e){this.$emit("upload-action",{type:e,sid:this.getSid(),dist:this.query.dir})},onFileOpen(e,t,n){t.type.startsWith("audio")?this.$emit("audio-open",t,n):(new x).view(e,t,n)},onOutlinkClick(){Object(i["a"])(D["a"])({items:this.selectedItems})},share(e){Object(i["a"])(K)({alias:e.alias})},viewlink(e){this.linkLoader(e).then(e=>{const t=this.$createElement;this.$msgbox({title:"获取外链",message:t("p",null,e),confirmButtonText:"确定"})})},move(e){Object(i["a"])(O)({alias:e.alias,isDir:e.dirtype>0}).then(()=>{this.listRefresh()})},rename(e){this.$prompt(this.$t("tips.rename"),this.$t("op.rename"),{inputValue:e.name,confirmButtonText:this.$t("op.confirm"),cancelButtonText:this.$t("op.cancel")}).then(({value:t})=>{this.$zpan.File.rename(e.alias,t).then(e=>{this.$message({type:"success",message:this.$t("msg.rename-success")}),this.listRefresh()})})},remove(e){this.$confirm(this.$t("tips.remove"),this.$t("op.delete")+" "+e.name,{type:"warning",confirmButtonText:this.$t("op.confirm"),cancelButtonText:this.$t("op.cancel")}).then(()=>{this.$zpan.File.delete(e.alias).then(e=>{this.$message({type:"success",message:this.$t("msg.delete-success")}),this.listRefresh()})})},onSelectionChange(e){this.selectedItems=e},deleteSelection(){this.$confirm(this.$t("tips.batch-delete"),this.$t("op.batch-delete"),{type:"warning",confirmButtonText:this.$t("op.confirm"),cancelButtonText:this.$t("op.cancel")}).then(()=>{const e=this.$loading({lock:!0,text:this.$t("tips.deleting"),spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});Promise.all(this.selectedItems.map(e=>this.$zpan.File.delete(e.alias))).then(t=>{this.listRefresh(),e.close(),this.$message({type:"success",message:this.$t("msg.batch-delete-success")})}).catch(t=>{e.close(),console.log(t)})})}},mounted(){this.query.type=this.$route.query.type,this.folderBtnShown=!this.query.type}},N=A,U=(n("8c4f"),Object(p["a"])(N,s,o,!1,null,"1d92f5df",null));t["default"]=U.exports},ebbf:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return a}));const s={data(){return{cs:{}}},watch:{$route(e,t){this.setCs()}},computed:{},methods:{setCs(){this.$store.state.storages.forEach(e=>{e.name==this.$route.params.sname&&(this.cs=e)})},getSid(){return this.cs.id}},mounted(){this.setCs()}};var o=s;const i={data(){return{visible:!1}},watch:{visible(e){!e&&this.$destroy()}},mounted(){document.body.appendChild(this.$el),this.visible=!0},destroyed(){this.$el.parentNode.removeChild(this.$el)},methods:{open(){this.visible=!0},close(){this.visible=!1},completed(){this.$emit("completed")},finish(){this.close(),this.completed()}}};var a=i}}]);