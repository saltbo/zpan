{"version":3,"sources":["webpack:///./src/helper.js","webpack:///./src/views/admin/storages/index.vue?41a9","webpack:///./src/views/admin/storages/dialog-edit.vue?57b0","webpack:///src/views/admin/storages/dialog-edit.vue","webpack:///./src/views/admin/storages/dialog-edit.vue?f9fe","webpack:///./src/views/admin/storages/dialog-edit.vue","webpack:///src/views/admin/storages/index.vue","webpack:///./src/views/admin/storages/index.vue?a50e","webpack:///./src/views/admin/storages/index.vue","webpack:///./src/views/admin/storages/dialog-edit.vue?a25b","webpack:///./src/libs/mixin/cs.js","webpack:///./src/libs/mixin/dialog.js"],"names":["transfer","component","_constructor","Vue","extend","propsData","console","log","instance","i18n","store","router","$mount","document","createElement","Promise","resolve","reject","$once","data","render","_vm","this","_h","$createElement","_c","_self","staticClass","staticStyle","attrs","$t","on","listRefresh","model","value","query","callback","$$v","$set","expression","onCreate","_v","_s","rows","scopedSlots","_u","key","fn","scope","$event","onEdit","$index","row","onDelete","pageNo","limit","total","staticRenderFns","visible","ref","form","rules","editMode","_l","item","openEnvs","onSubmit","envDrawerVisible","support_envs","mixins","props","type","Object","default","mode","providers","name","provider","bucket","endpoint","access_key","secret_key","computed","id","methods","$zpan","System","matterPathEnvs","then","$refs","validate","valid","submit","message","mounted","offset","Storage","list","$confirm","confirmButtonText","cancelButtonText","Mixin","cs","watch","$route","newVal","oldVal","setCs","$store","state","storages","forEach","ele","params","sname","getSid","DialogMixin","val","$destroy","body","appendChild","$el","destroyed","parentNode","removeChild","open","close","finish","$emit"],"mappings":"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","file":"js/chunk-b7a527f0.76667291.js","sourcesContent":["import Vue from 'vue'\nimport i18n from './i18n'\nimport store from './store'\nimport router from './router'\n\nexport const transfer = component => {\n    const _constructor = Vue.extend(component)\n    return function (propsData = {}) {\n        console.log(propsData)\n        let instance = new _constructor({ i18n, store, router, propsData }).$mount(document.createElement('div'))\n\n        return new Promise((resolve, reject) => {\n            instance.$once('completed', data => resolve(data))\n            instance.$once('cancel', data => reject(data))\n        })\n    }\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"topbar\"},[_c('el-input',{staticStyle:{\"width\":\"300px\"},attrs:{\"size\":\"medium\",\"placeholder\":_vm.$t('admin.storage-search-placeholder'),\"prefix-icon\":\"el-icon-search\"},on:{\"change\":_vm.listRefresh},model:{value:(_vm.query.email),callback:function ($$v) {_vm.$set(_vm.query, \"email\", $$v)},expression:\"query.email\"}}),_c('el-button',{staticStyle:{\"float\":\"right\"},attrs:{\"type\":\"primary\",\"size\":\"medium\"},on:{\"click\":_vm.onCreate}},[_vm._v(_vm._s(_vm.$t(\"admin.btn-storage-add\")))])],1),_c('el-card',{staticStyle:{\"margin-top\":\"10px\",\"padding-bottom\":\"20px\"},attrs:{\"shadow\":\"never\"}},[_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.rows,\"size\":\"medium\"}},[_c('el-table-column',{attrs:{\"prop\":\"id\",\"label\":\"ID\",\"width\":\"60\"}}),_c('el-table-column',{attrs:{\"prop\":\"name\",\"label\":_vm.$t('admin.label-name'),\"width\":\"100\"}}),_c('el-table-column',{attrs:{\"prop\":\"title\",\"label\":_vm.$t('admin.label-title'),\"width\":\"100\"}}),_c('el-table-column',{attrs:{\"prop\":\"bucket\",\"label\":_vm.$t('admin.label-bucket'),\"width\":\"250\"}}),_c('el-table-column',{attrs:{\"prop\":\"endpoint\",\"label\":_vm.$t('admin.label-endpoint')}}),_c('el-table-column',{attrs:{\"prop\":\"operation\",\"label\":_vm.$t('admin.label-operation'),\"width\":\"280\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"size\":\"mini\"},on:{\"click\":function($event){return _vm.onEdit(scope.$index, scope.row)}}},[_vm._v(_vm._s(_vm.$t(\"admin.btn-edit\")))]),_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"danger\"},on:{\"click\":function($event){return _vm.onDelete(scope.$index, scope.row)}}},[_vm._v(_vm._s(_vm.$t(\"delete\")))])]}}])})],1),_c('div',{staticStyle:{\"margin-top\":\"20px\"}},[_c('el-pagination',{staticStyle:{\"float\":\"right\"},attrs:{\"layout\":\"prev, pager, next\",\"current-page\":_vm.pageNo,\"page-size\":_vm.query.limit,\"total\":_vm.total},on:{\"update:currentPage\":function($event){_vm.pageNo=$event},\"update:current-page\":function($event){_vm.pageNo=$event},\"current-change\":_vm.listRefresh}})],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-drawer',{attrs:{\"title\":_vm.$t('admin.label-storage-manager'),\"visible\":_vm.visible,\"size\":\"50%\"},on:{\"update:visible\":function($event){_vm.visible=$event}}},[_c('el-form',{ref:\"form\",staticStyle:{\"padding-right\":\"50px\"},attrs:{\"model\":_vm.form,\"rules\":_vm.rules,\"size\":\"small\"}},[_c('el-tabs',{staticStyle:{\"margin-left\":\"20px\"},attrs:{\"value\":\"basic\",\"type\":\"card\"}},[_c('el-tab-pane',{attrs:{\"label\":\"基础配置\",\"name\":\"basic\"}},[_c('el-form-item',{attrs:{\"label\":\"类型\",\"label-width\":\"120px\"}},[_c('el-radio-group',{attrs:{\"disabled\":_vm.editMode},model:{value:(_vm.form.mode),callback:function ($$v) {_vm.$set(_vm.form, \"mode\", $$v)},expression:\"form.mode\"}},[_c('el-radio',{attrs:{\"label\":1}},[_vm._v(\"网盘\")]),_c('el-radio',{attrs:{\"label\":2}},[_vm._v(\"外链盘\")])],1)],1),_c('el-form-item',{attrs:{\"prop\":\"name\",\"label\":_vm.$t('admin.label-name'),\"label-width\":\"120px\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入一个名字\",\"autofocus\":\"\"},model:{value:(_vm.form.name),callback:function ($$v) {_vm.$set(_vm.form, \"name\", $$v)},expression:\"form.name\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"provider\",\"label\":\"云平台\",\"label-width\":\"120px\"}},[_c('el-select',{staticStyle:{\"width\":\"100%\"},attrs:{\"placeholder\":\"请选择您的云平台\",\"disabled\":_vm.editMode},model:{value:(_vm.form.provider),callback:function ($$v) {_vm.$set(_vm.form, \"provider\", $$v)},expression:\"form.provider\"}},_vm._l((_vm.providers),function(item){return _c('el-option',{key:item,attrs:{\"label\":item,\"value\":item}})}),1)],1),_c('el-form-item',{attrs:{\"prop\":\"bucket\",\"label\":_vm.$t('admin.label-bucket'),\"label-width\":\"120px\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入您在云平台的存储桶名称\",\"disabled\":_vm.editMode},model:{value:(_vm.form.bucket),callback:function ($$v) {_vm.$set(_vm.form, \"bucket\", $$v)},expression:\"form.bucket\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"endpoint\",\"label\":_vm.$t('admin.label-endpoint'),\"label-width\":\"120px\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入存储桶的接入域名，不包含存储桶名称\",\"disabled\":_vm.editMode},model:{value:(_vm.form.endpoint),callback:function ($$v) {_vm.$set(_vm.form, \"endpoint\", $$v)},expression:\"form.endpoint\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"access_key\",\"label\":_vm.$t('admin.label-access_key'),\"label-width\":\"120px\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入用来操作存储桶的AK\"},model:{value:(_vm.form.access_key),callback:function ($$v) {_vm.$set(_vm.form, \"access_key\", $$v)},expression:\"form.access_key\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"secret_key\",\"label\":_vm.$t('admin.label-secret_key'),\"label-width\":\"120px\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入用来操作存储桶的SK\",\"type\":\"password\"},model:{value:(_vm.form.secret_key),callback:function ($$v) {_vm.$set(_vm.form, \"secret_key\", $$v)},expression:\"form.secret_key\"}})],1)],1),_c('el-tab-pane',{attrs:{\"label\":\"高级配置\",\"name\":\"storage\"}},[_c('el-form-item',{attrs:{\"prop\":\"title\",\"label\":_vm.$t('admin.label-title'),\"label-width\":\"120px\"}},[_c('el-input',{attrs:{\"placeholder\":\"设置导航栏标题，默认使用存储名称\"},model:{value:(_vm.form.title),callback:function ($$v) {_vm.$set(_vm.form, \"title\", $$v)},expression:\"form.title\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"custom_host\",\"label\":_vm.$t('admin.label-custom_host'),\"label-width\":\"120px\"}},[_c('el-input',{attrs:{\"placeholder\":\"设置存储桶绑定的自定义域名，默认使用Endpoint\"},model:{value:(_vm.form.custom_host),callback:function ($$v) {_vm.$set(_vm.form, \"custom_host\", $$v)},expression:\"form.custom_host\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"root_path\",\"label\":\"存储根路径\",\"label-width\":\"120px\"}},[_c('el-input',{attrs:{\"placeholder\":\"设置文件存储规则，不填则默认为Bucket根路径\"},model:{value:(_vm.form.root_path),callback:function ($$v) {_vm.$set(_vm.form, \"root_path\", $$v)},expression:\"form.root_path\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"file_path\",\"label\":\"文件存储路径\",\"label-width\":\"120px\"}},[_c('el-input',{attrs:{\"placeholder\":\"设置文件存储规则，不填则使用系统默认规则\"},model:{value:(_vm.form.file_path),callback:function ($$v) {_vm.$set(_vm.form, \"file_path\", $$v)},expression:\"form.file_path\"}}),_c('span',{staticClass:\"tips\",on:{\"click\":_vm.openEnvs}},[_c('i',{staticClass:\"el-icon-warning\"}),_vm._v(\"支持的系统变量\")])],1)],1)],1)],1),_c('div',{staticClass:\"footer\"},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.onSubmit}},[_vm._v(_vm._s(_vm.$t(\"confirm\")))]),_c('el-button',{on:{\"click\":function($event){_vm.visible = false}}},[_vm._v(_vm._s(_vm.$t(\"cancel\")))])],1),_c('el-drawer',{attrs:{\"title\":\"支持的系统变量\",\"append-to-body\":true,\"visible\":_vm.envDrawerVisible,\"size\":\"35%\"},on:{\"update:visible\":function($event){_vm.envDrawerVisible=$event}}},[_c('el-table',{staticStyle:{\"padding\":\"10px 20px\"},attrs:{\"data\":_vm.support_envs,\"size\":\"small\"}},[_c('el-table-column',{attrs:{\"property\":\"name\",\"label\":\"变量\",\"width\":\"150\"}}),_c('el-table-column',{attrs:{\"property\":\"intro\",\"label\":\"介绍\",\"width\":\"150\"}}),_c('el-table-column',{attrs:{\"property\":\"example\",\"label\":\"例子\"}})],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <el-drawer :title=\"$t('admin.label-storage-manager')\" :visible.sync=\"visible\" size=\"50%\">\n    <el-form :model=\"form\" :rules=\"rules\" ref=\"form\" style=\"padding-right: 50px\" size=\"small\">\n      <el-tabs value=\"basic\" type=\"card\" style=\"margin-left: 20px\">\n        <el-tab-pane label=\"基础配置\" name=\"basic\">\n          <el-form-item label=\"类型\" label-width=\"120px\">\n            <el-radio-group v-model=\"form.mode\" :disabled=\"editMode\">\n              <el-radio :label=\"1\">网盘</el-radio>\n              <el-radio :label=\"2\">外链盘</el-radio>\n            </el-radio-group>\n          </el-form-item>\n          <el-form-item prop=\"name\" :label=\"$t('admin.label-name')\" label-width=\"120px\">\n            <el-input v-model=\"form.name\" placeholder=\"请输入一个名字\" autofocus></el-input>\n          </el-form-item>\n          <el-form-item prop=\"provider\" label=\"云平台\" label-width=\"120px\">\n            <el-select v-model=\"form.provider\" placeholder=\"请选择您的云平台\" :disabled=\"editMode\" style=\"width: 100%\">\n              <el-option v-for=\"item in providers\" :key=\"item\" :label=\"item\" :value=\"item\"> </el-option>\n            </el-select>\n          </el-form-item>\n          <el-form-item prop=\"bucket\" :label=\"$t('admin.label-bucket')\" label-width=\"120px\">\n            <el-input v-model=\"form.bucket\" placeholder=\"请输入您在云平台的存储桶名称\" :disabled=\"editMode\"></el-input>\n          </el-form-item>\n          <el-form-item prop=\"endpoint\" :label=\"$t('admin.label-endpoint')\" label-width=\"120px\">\n            <el-input v-model=\"form.endpoint\" placeholder=\"请输入存储桶的接入域名，不包含存储桶名称\" :disabled=\"editMode\"></el-input>\n          </el-form-item>\n          <el-form-item prop=\"access_key\" :label=\"$t('admin.label-access_key')\" label-width=\"120px\">\n            <el-input v-model=\"form.access_key\" placeholder=\"请输入用来操作存储桶的AK\"></el-input>\n          </el-form-item>\n          <el-form-item prop=\"secret_key\" :label=\"$t('admin.label-secret_key')\" label-width=\"120px\">\n            <el-input v-model=\"form.secret_key\" placeholder=\"请输入用来操作存储桶的SK\" type=\"password\"></el-input>\n          </el-form-item>\n        </el-tab-pane>\n        <el-tab-pane label=\"高级配置\" name=\"storage\">\n          <el-form-item prop=\"title\" :label=\"$t('admin.label-title')\" label-width=\"120px\">\n            <el-input v-model=\"form.title\" placeholder=\"设置导航栏标题，默认使用存储名称\"></el-input>\n          </el-form-item>\n          <el-form-item prop=\"custom_host\" :label=\"$t('admin.label-custom_host')\" label-width=\"120px\">\n            <el-input v-model=\"form.custom_host\" placeholder=\"设置存储桶绑定的自定义域名，默认使用Endpoint\"></el-input>\n          </el-form-item>\n          <el-form-item prop=\"root_path\" label=\"存储根路径\" label-width=\"120px\">\n            <el-input v-model=\"form.root_path\" placeholder=\"设置文件存储规则，不填则默认为Bucket根路径\"></el-input>\n          </el-form-item>\n          <el-form-item prop=\"file_path\" label=\"文件存储路径\" label-width=\"120px\">\n            <el-input v-model=\"form.file_path\" placeholder=\"设置文件存储规则，不填则使用系统默认规则\"></el-input>\n            <span class=\"tips\" @click=\"openEnvs\"><i class=\"el-icon-warning\"></i>支持的系统变量</span>\n          </el-form-item>\n          <!-- <el-form-item prop=\"idirs\" label=\"系统目录\" label-width=\"120px\">\n            <el-select v-model=\"form.internal_dirs\" multiple filterable allow-create default-first-option style=\"width: 100%\" placeholder=\"设置系统内置目录，这些目录不允许用户删除\">\n              <el-option v-for=\"item in form.internal_dirs\" :key=\"item\" :label=\"item\" :value=\"item\"> </el-option>\n            </el-select>\n          </el-form-item> -->\n        </el-tab-pane>\n      </el-tabs>\n    </el-form>\n    <div class=\"footer\">\n      <el-button type=\"primary\" @click=\"onSubmit\">{{ $t(\"confirm\") }}</el-button>\n      <el-button @click=\"visible = false\">{{ $t(\"cancel\") }}</el-button>\n    </div>\n\n    <!-- 系统变量提示 -->\n    <el-drawer title=\"支持的系统变量\" :append-to-body=\"true\" :visible.sync=\"envDrawerVisible\" size=\"35%\">\n      <el-table :data=\"support_envs\" size=\"small\" style=\"padding: 10px 20px\">\n        <el-table-column property=\"name\" label=\"变量\" width=\"150\"></el-table-column>\n        <el-table-column property=\"intro\" label=\"介绍\" width=\"150\"></el-table-column>\n        <el-table-column property=\"example\" label=\"例子\"></el-table-column>\n      </el-table>\n    </el-drawer>\n  </el-drawer>\n</template>\n\n<script>\nimport { DialogMixin } from \"@/libs/mixin\";\nexport default {\n  mixins: [DialogMixin],\n  props: {\n    form: {\n      type: Object,\n      default: () => {\n        return {\n          mode: 1,\n        };\n      },\n    },\n  },\n  data() {\n    return {\n      providers: [],\n      envDrawerVisible: false,\n      support_envs: [],\n      rules: {\n        name: [\n          { required: true, message: \"请输入存储名称\", trigger: \"blur\" },\n          { pattern: /^[A-Za-z0-9\\-]+$/, message: \"仅允许使用字母数字和中线(-)\", trigger: \"blur\" },\n        ],\n        provider: [{ required: true, message: \"请选择云平台\", trigger: \"change\" }],\n        bucket: [{ required: true, message: \"请填写存储桶名称\", trigger: \"blur\" }],\n        endpoint: [\n          { required: true, message: \"请填写Endpoint\", trigger: \"blur\" },\n          // fixme: 这个规则不完美，漏掉了ip，应该是不允许使用IP的\n          { pattern: /^(?=^.{3,255}$)[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(\\.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+$/, message: \"Endpoint只包含域名\", trigger: \"blur\" },\n        ],\n        access_key: [{ required: true, message: \"请填写AccessKey\", trigger: \"blur\" }],\n        secret_key: [{ required: true, message: \"请填写SecretKey\", trigger: \"blur\" }],\n      },\n    };\n  },\n  computed: {\n    editMode() {\n      return this.form.id > 0;\n    },\n  },\n  methods: {\n    openEnvs() {\n      this.envDrawerVisible = true;\n      this.$zpan.System.matterPathEnvs().then((ret) => {\n        this.support_envs = ret.data;\n      });\n    },\n    onSubmit() {\n      this.$refs.form.validate((valid) => {\n        if (!valid) {\n          return;\n        }\n\n        let submit = this.$zpan.Storage.create;\n        if (this.form.id) {\n          submit = this.$zpan.Storage.update;\n        }\n\n        // this.form.idirs = this.form.internal_dirs.join(\",\");\n        submit(this.form).then((ret) => {\n          this.close();\n          this.finish();\n          this.$message({\n            type: \"success\",\n            message: this.$t(\"msg.save-success\"),\n          });\n        });\n      });\n    },\n  },\n  mounted() {\n    this.$zpan.System.providers().then((ret) => {\n      this.providers = ret.data;\n    });\n  },\n};\n</script>\n\n<style lang=\"stylus\" >\n.el-drawer__body\n  overflow: auto;\n\n.footer\n  margin-left: 142px;\n  margin-top: 25px;\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./dialog-edit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./dialog-edit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./dialog-edit.vue?vue&type=template&id=aeef336e&\"\nimport script from \"./dialog-edit.vue?vue&type=script&lang=js&\"\nexport * from \"./dialog-edit.vue?vue&type=script&lang=js&\"\nimport style0 from \"./dialog-edit.vue?vue&type=style&index=0&lang=stylus&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div>\n    <div class=\"topbar\">\n      <el-input v-model=\"query.email\" @change=\"listRefresh\" size=\"medium\" :placeholder=\"$t('admin.storage-search-placeholder')\" prefix-icon=\"el-icon-search\" style=\"width: 300px\"></el-input>\n      <el-button type=\"primary\" size=\"medium\" style=\"float: right\" @click=\"onCreate\">{{ $t(\"admin.btn-storage-add\") }}</el-button>\n    </div>\n\n    <el-card shadow=\"never\" style=\"margin-top: 10px; padding-bottom: 20px\">\n      <el-table :data=\"rows\" size=\"medium\" style=\"width: 100%\">\n        <el-table-column prop=\"id\" label=\"ID\" width=\"60\"> </el-table-column>\n        <el-table-column prop=\"name\" :label=\"$t('admin.label-name')\" width=\"100\"> </el-table-column>\n        <el-table-column prop=\"title\" :label=\"$t('admin.label-title')\" width=\"100\"> </el-table-column>\n        <el-table-column prop=\"bucket\" :label=\"$t('admin.label-bucket')\" width=\"250\"> </el-table-column>\n        <el-table-column prop=\"endpoint\" :label=\"$t('admin.label-endpoint')\"> </el-table-column>\n        <el-table-column prop=\"operation\" :label=\"$t('admin.label-operation')\" width=\"280\">\n          <template slot-scope=\"scope\">\n            <el-button size=\"mini\" @click=\"onEdit(scope.$index, scope.row)\">{{ $t(\"admin.btn-edit\") }}</el-button>\n            <el-button size=\"mini\" type=\"danger\" @click=\"onDelete(scope.$index, scope.row)\">{{ $t(\"delete\") }}</el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n\n      <div style=\"margin-top: 20px\">\n        <el-pagination layout=\"prev, pager, next\" :current-page.sync=\"pageNo\" :page-size=\"query.limit\" :total=\"total\" @current-change=\"listRefresh\" style=\"float: right\"> </el-pagination>\n      </div>\n    </el-card>\n  </div>\n</template>\n\n<script>\nimport { transfer } from \"@/helper\";\nimport EditDialog from \"./dialog-edit\";\nexport default {\n  data() {\n    return {\n      query: {\n        offset: 0,\n        limit: 20,\n      },\n      pageNo: 1,\n      rows: [],\n      total: 0,\n    };\n  },\n  methods: {\n    listRefresh() {\n      this.query.offset = (this.pageNo - 1) * this.query.limit;\n      this.$zpan.Storage.list(this.query).then((ret) => {\n        this.rows = ret.data.list;\n        this.total = ret.data.total;\n      });\n    },\n    onCreate() {\n      transfer(EditDialog)({}).then(() => {\n        this.listRefresh();\n      });\n    },\n    onEdit(index, row) {\n      let props = { form: Object.assign({}, row) };\n      transfer(EditDialog)(props).then(() => {\n        this.listRefresh();\n      });\n    },\n    onDelete(index, row) {\n      this.$confirm(this.$t(\"tips.remove\"), this.$t(\"delete\") + ` ${row.name}`, {\n        type: \"warning\",\n        confirmButtonText: this.$t(\"confirm\"),\n        cancelButtonText: this.$t(\"cancel\"),\n      }).then(() => {\n        this.$zpan.Storage.delete(row.id).then((ret) => {\n          this.$message({\n            type: \"success\",\n            message: this.$t(\"msg.delete-success\"),\n          });\n          this.listRefresh();\n        });\n      });\n    },\n  },\n  mounted() {\n    this.listRefresh();\n  },\n};\n</script>\n\n<style>\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=b060e028&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./dialog-edit.vue?vue&type=style&index=0&lang=stylus&\"","\nconst Mixin = {\n    data() {\n        return {\n            cs: {}\n        }\n    },\n    watch: {\n        $route(newVal, oldVal) {\n            this.setCs()\n        },\n    },\n    computed: {},\n    methods: {\n        setCs() {\n            this.$store.state.storages.forEach((ele) => {\n                if (ele.name == this.$route.params.sname) {\n                    this.cs = ele\n                }\n            });\n        },\n        getSid() {\n            return this.cs.id\n        },\n    },\n    mounted() {\n        this.setCs()\n    },\n}\n\nexport default Mixin","const DialogMixin = {\n    data() {\n        return {\n            visible: false\n        }\n    },\n    watch: {\n        visible(val) {\n            !val && this.$destroy()\n        }\n    },\n    mounted() {\n        document.body.appendChild(this.$el)\n        this.visible = true\n    },\n    destroyed() {\n        this.$el.parentNode.removeChild(this.$el)\n    },\n    methods: {\n        open() {\n            this.visible = true;\n        },\n        close() {\n            this.visible = false;\n        },\n        finish() {\n            this.visible = false;\n            this.$emit('completed');\n        },\n    }\n}\n\nexport default DialogMixin"],"sourceRoot":""}