(function(e){function t(t){for(var a,r,i=t[0],c=t[1],l=t[2],u=0,d=[];u<i.length;u++)r=i[u],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&d.push(o[r][0]),o[r]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);p&&p(t);while(d.length)d.shift()();return s.push.apply(s,l||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],a=!0,r=1;r<n.length;r++){var i=n[r];0!==o[i]&&(a=!1)}a&&(s.splice(t--,1),e=c(c.s=n[0]))}return e}var a={},r={index:0},o={index:0},s=[];function i(e){return c.p+"js/"+({}[e]||e)+"."+{"chunk-07c1386c":"e1f81891","chunk-141f1d87":"9e28d80f","chunk-171d5da5":"c57e0dcb","chunk-17d72616":"d66e14d3","chunk-22dece4e":"869c6e2d","chunk-2c3e28d6":"c1de2869","chunk-2d0a4fde":"7ca0ffb9","chunk-2d0afa39":"d4b3cc19","chunk-2d0bce73":"35e4ed93","chunk-2d0c5700":"1ba28bed","chunk-2d0d76a6":"2b44947d","chunk-2d0daeb3":"8cd99d0b","chunk-2d207759":"10f36fd1","chunk-2d226c9e":"baf5a21d","chunk-371ca9cd":"2687c447","chunk-3918a232":"3864ed69","chunk-48e85850":"18202be3","chunk-4fae512a":"314ba111","chunk-5db82f0c":"22797f37","chunk-753faf1e":"d8291d86","chunk-c39e5b9a":"068605f6","chunk-e11c2bda":"9feaff11","chunk-0e8dbb5f":"fde1c319","chunk-2d0e95df":"7b238ed2","chunk-3e211003":"a5a152c1","chunk-b66bdb3e":"66f61a2c","chunk-c35cc142":"bd697ac8","chunk-e380101a":"6431f97c","chunk-e3ab30f8":"97595e20"}[e]+".js"}function c(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(e){var t=[],n={"chunk-07c1386c":1,"chunk-141f1d87":1,"chunk-171d5da5":1,"chunk-17d72616":1,"chunk-22dece4e":1,"chunk-2c3e28d6":1,"chunk-371ca9cd":1,"chunk-3918a232":1,"chunk-48e85850":1,"chunk-4fae512a":1,"chunk-5db82f0c":1,"chunk-753faf1e":1,"chunk-e11c2bda":1,"chunk-0e8dbb5f":1,"chunk-3e211003":1,"chunk-b66bdb3e":1,"chunk-c35cc142":1,"chunk-e380101a":1,"chunk-e3ab30f8":1};r[e]?t.push(r[e]):0!==r[e]&&n[e]&&t.push(r[e]=new Promise((function(t,n){for(var a="css/"+({}[e]||e)+"."+{"chunk-07c1386c":"09f4af54","chunk-141f1d87":"09f4af54","chunk-171d5da5":"e0eb3850","chunk-17d72616":"c4257cb3","chunk-22dece4e":"1d3af35b","chunk-2c3e28d6":"e72cbb07","chunk-2d0a4fde":"31d6cfe0","chunk-2d0afa39":"31d6cfe0","chunk-2d0bce73":"31d6cfe0","chunk-2d0c5700":"31d6cfe0","chunk-2d0d76a6":"31d6cfe0","chunk-2d0daeb3":"31d6cfe0","chunk-2d207759":"31d6cfe0","chunk-2d226c9e":"31d6cfe0","chunk-371ca9cd":"6a417862","chunk-3918a232":"439841c9","chunk-48e85850":"95c79dda","chunk-4fae512a":"09f4af54","chunk-5db82f0c":"1d3af35b","chunk-753faf1e":"a0ccf9af","chunk-c39e5b9a":"31d6cfe0","chunk-e11c2bda":"be282ce8","chunk-0e8dbb5f":"0d875ebb","chunk-2d0e95df":"31d6cfe0","chunk-3e211003":"66bfbc46","chunk-b66bdb3e":"f01cebc8","chunk-c35cc142":"1579c98c","chunk-e380101a":"cc54cf17","chunk-e3ab30f8":"8ad46891"}[e]+".css",o=c.p+a,s=document.getElementsByTagName("link"),i=0;i<s.length;i++){var l=s[i],u=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(u===a||u===o))return t()}var d=document.getElementsByTagName("style");for(i=0;i<d.length;i++){l=d[i],u=l.getAttribute("data-href");if(u===a||u===o)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var a=t&&t.target&&t.target.src||o,s=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=a,delete r[e],p.parentNode.removeChild(p),n(s)},p.href=o;var h=document.getElementsByTagName("head")[0];h.appendChild(p)})).then((function(){r[e]=0})));var a=o[e];if(0!==a)if(a)t.push(a[2]);else{var s=new Promise((function(t,n){a=o[e]=[t,n]}));t.push(a[2]=s);var l,u=document.createElement("script");u.charset="utf-8",u.timeout=120,c.nc&&u.setAttribute("nonce",c.nc),u.src=i(e);var d=new Error;l=function(t){u.onerror=u.onload=null,clearTimeout(p);var n=o[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+a+": "+r+")",d.name="ChunkLoadError",d.type=a,d.request=r,n[1](d)}o[e]=void 0}};var p=setTimeout((function(){l({type:"timeout",target:u})}),12e4);u.onerror=u.onload=l,document.head.appendChild(u)}return Promise.all(t)},c.m=e,c.c=a,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)c.d(n,a,function(t){return e[t]}.bind(null,a));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/",c.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=t,l=l.slice();for(var d=0;d<l.length;d++)t(l[d]);var p=u;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";n("64a9")},"14ee":function(e,t,n){},1914:function(e,t){e.exports=PhotoSwipe},"2dfc":function(e,t){},"338e":function(e,t,n){},"41cb":function(e,t,n){"use strict";var a=n("8bbf"),r=n.n(a),o=n("6389"),s=n.n(o),i=n("9225");n("c0d6");r.a.use(s.a);let c=new s.a({mode:"history",routes:[{path:"/",name:"home",component:()=>Promise.all([n.e("chunk-e11c2bda"),n.e("chunk-3e211003")]).then(n.bind(null,"7abe"))},{path:"*",name:"notfound",component:()=>Promise.all([n.e("chunk-e11c2bda"),n.e("chunk-2d0e95df")]).then(n.bind(null,"8cdb"))},{path:"/install",name:"installer",component:()=>Promise.all([n.e("chunk-e11c2bda"),n.e("chunk-c35cc142")]).then(n.bind(null,"a25c"))},{path:"/:sname",component:()=>Promise.all([n.e("chunk-e11c2bda"),n.e("chunk-3e211003")]).then(n.bind(null,"7abe")),children:[{path:"/",name:"disk",component:()=>n.e("chunk-2c3e28d6").then(n.bind(null,"db7e"))},{path:"pic",name:"pic",component:()=>n.e("chunk-c39e5b9a").then(n.bind(null,"8a3a"))},{path:"share",name:"share",component:()=>n.e("chunk-3918a232").then(n.bind(null,"e238"))},{path:"recyclebin",name:"recyclebin",component:()=>n.e("chunk-17d72616").then(n.bind(null,"4438"))}]},{path:"/s/:alias",name:"share-info",component:()=>Promise.all([n.e("chunk-e11c2bda"),n.e("chunk-e380101a")]).then(n.bind(null,"ce0d"))},{path:"/s/:alias/draw",name:"share-draw",component:()=>n.e("chunk-753faf1e").then(n.bind(null,"bc5a"))},{path:"/f/editor",name:"editor",component:()=>n.e("chunk-2d226c9e").then(n.bind(null,"e9c7"))},{path:"/viewer/pdf",name:"viewer",component:()=>n.e("chunk-171d5da5").then(n.bind(null,"9b9b"))},{path:"/settings",component:()=>Promise.all([n.e("chunk-e11c2bda"),n.e("chunk-b66bdb3e")]).then(n.bind(null,"61c2")),children:[{path:"profile",name:"profile",component:()=>n.e("chunk-4fae512a").then(n.bind(null,"31bb"))},{path:"security",name:"security",component:()=>n.e("chunk-141f1d87").then(n.bind(null,"2fff"))},{path:"developer",name:"developer",component:()=>n.e("chunk-07c1386c").then(n.bind(null,"acca"))}]},{path:"/admin",component:()=>Promise.all([n.e("chunk-e11c2bda"),n.e("chunk-e3ab30f8")]).then(n.bind(null,"2953")),children:[{path:"dashboard",name:"admin",component:()=>n.e("chunk-2d0a4fde").then(n.bind(null,"0998"))},{path:"users",name:"users",component:()=>n.e("chunk-48e85850").then(n.bind(null,"4da1"))},{path:"storages",name:"storages",component:()=>n.e("chunk-371ca9cd").then(n.bind(null,"6a72"))},{path:"settings",name:"settings",component:()=>n.e("chunk-5db82f0c").then(n.bind(null,"c6e4"))},{path:"settings/email",name:"settings-email",component:()=>n.e("chunk-22dece4e").then(n.bind(null,"0a01"))}]},{path:"/u",component:()=>Promise.all([n.e("chunk-e11c2bda"),n.e("chunk-0e8dbb5f")]).then(n.bind(null,"9ed6")),children:[{path:"signin",name:"signin",meta:{title:"用户登录"},component:()=>n.e("chunk-2d0daeb3").then(n.bind(null,"6e3a"))},{path:"signout",name:"signout",meta:{title:"用户登出"},component:()=>n.e("chunk-2d0d76a6").then(n.bind(null,"775e"))},{path:"signin/:token64",name:"activate",meta:{title:"账户激活"},component:()=>n.e("chunk-2d0afa39").then(n.bind(null,"0ed2"))},{path:"signup",name:"signup",meta:{title:"用户注册"},component:()=>n.e("chunk-2d0bce73").then(n.bind(null,"2a5c"))},{path:"password-reset",name:"reset_apply",meta:{title:"密码找回"},component:()=>n.e("chunk-2d0c5700").then(n.bind(null,"3ea9"))},{path:"password-reset/:token64",name:"reset_confirm",meta:{title:"密码找回"},component:()=>n.e("chunk-2d207759").then(n.bind(null,"a12e"))}]}]});const l=(e,t)=>{r.a.zpan.System.optGet("core.site").then(t=>{let n=t.data,a=n.name;e&&(a+="- "+e),window.document.title=a,i["a"].locale=n.locale}).catch(e=>{e.response&&520==e.response.status&&t({name:"installer"})})};c.beforeEach((e,t,n)=>{l(i["a"].t("title."+e.name),n),n()}),c.afterEach(()=>{window.scrollTo(0,0)}),t["a"]=c},"423e":function(e){e.exports=JSON.parse('{"click-copy-link":"点击复制链接","copy-link":"复制链接","create-folder":"新建文件夹","day":"天","op":{"close":"关闭","confirm":"确认","init":"初始化","reset":"重置","cancel":"取消","enable":"启用","disable":"禁用","rename":"重命名","delete":"删除","batch-delete":"批量删除"},"msg":{"success":"成功","failed":"失败","batch-delete-success":"批量删除成功","create-success":"创建成功","delete-success":"删除成功","move-success":"移动成功","copy-success":"复制成功","copy-failed":"复制失败","rename-success":"重命名成功","save-success":"保存成功","clean-success":"清理成功","recovery-success":"恢复成功","cancel-success":"取消成功"},"dialog":{"moveto-title":"移动到","outlink-title":"下载外链","share-drawcode":"提取码","share-drawcode-switch":"使用提取码保护链接","share-expire-time":"有效期","share-link":"链接地址","share-title":"分享链接","upload-click":"点击上传","upload-tips":"将文件拖到此处，或","upload-title":"上传队列"},"disk":{"delete":"删除","download":"下载","folder":"新建","upload":"上传"},"ft":{"breadcrumb":"全部文件"},"ftb":{"move":"移动到","remove":"删除","rename":"重命名"},"fth":{"name":"名称","size":"大小","updated":"最近更新"},"leftnav":{"audio":"音频","doc":"文档","files":"全部文件","image":"图片","share":"我的分享","recyclebin":"回收站","storage":"存储空间","video":"视频"},"share":{"auto-download-tips":"您的文件已经开始下载，如果没有开始请点击此处重试","created":"分享时间","drawcode":"提取码","drawcode-placeholder":"请输入提取码","drawfile":"提取文件","expired":"失效时间","link":"链接","name":"名称","cancel":"取消分享"},"recyclebin":{"recovery":"确认恢复？","delete":"彻底删除？","clean":"清空回收站"},"tips":{"batch-delete":"此操作将永久删除所选文件，是否继续？","create-folder":"请输入新的文件夹名称","remove":"此操作将文件移动到回收站, 是否继续?","rename":"请输入新的名称","recyclebin":"提示：回收站也占用网盘空间，请及时清理哦~","share-cancel":"取消分享后，该条分享记录将被删除，好友将无法再访问此分享链接。 您确认要取消分享吗？","recovery":"确认还原选中的文件？","delete":"此操作将彻底删除该文件, 是否继续?","clean":"确认清空回收站？","deleting":"正在删除...","disable":"禁用后将不可用，是否继续？","enable":"确认启用？","secret-reset":"重置后，老的秘钥将无法使用，是否继续？","secret-init":"您尚未开通开发者权限，是否开通？"},"topbar":{"netdisk":"网盘","imghosting":"图床","search":"搜索...","profile":"个人主页","settings":"个人设置","s-platform":"管理后台","signout":"退出"},"title":{"disk":"我的文件","share":"我的分享","recyclebin":"回收站","picture":"我的图床","storage-quota":"存储配额","admin":"管理后台","storages":"存储管理","users":"用户管理","settings":"站点设置","settings-email":"发信邮箱"},"year":"年","admin":{"search-placeholder":"请输入要查找的用户邮箱...","storage-search-placeholder":"请输入要查找的存储空间...","btn-user-add":"添加新用户","btn-quota-update":"调整配额","btn-storage-add":"创建存储","btn-edit":"编辑","label-nickname":"用户昵称","label-email":"Email","label-role":"角色","label-status":"状态","label-storage":"配额","label-operation":"操作","label-quota":"存储配额","label-quota-change":"配额调整","label-password-reset":"密码重置","label-storage-manager":"存储管理","label-name":"名称","label-title":"标题","label-intro":"描述","label-bucket":"存储桶","label-endpoint":"接入点","label-region":"区域名称","label-custom_host":"自有域名","label-access_key":"AccessKey","label-secret_key":"SecretKey"},"cloudplatform":{"COS":"腾讯云","KODO":"七牛云","MINIO":"自建云","NOS":"网易云","OBS":"华为云","OSS":"阿里云","S3":"亚马逊","US3":"UColud","USS":"又拍云"},"uploader":{"file":"上传文件","folder":"上传文件夹","new-folder":"新建文件夹","upload-in-progress":"正在上传","upload-done":"上传完成","no-tasks":"暂无上传任务","upload-hint":"仅展示本次上传任务"}}')},"49f8":function(e,t,n){var a={"./en.json":"edd4","./zh-CN.json":"423e"};function r(e){var t=o(e);return n(t)}function o(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=o,e.exports=r,r.id="49f8"},"56d7":function(e,t,n){"use strict";n.r(t);var a=n("8bbf"),r=n.n(a),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("router-view",{attrs:{id:"app"}})},s=[],i={data(){return{}},watch:{},computed:{},methods:{},mounted(){this.$clipboard.on("success",e=>{this.$message.success(this.$t("msg.copy-success")),e.clearSelection()}),this.$clipboard.on("error",e=>{this.$message.error(this.$t("msg.copy-failed"))})},beforeDestroy(){this.$clipboard.destroy()}},c=i,l=(n("034f"),n("2877")),u=Object(l["a"])(c,o,s,!1,null,null,null),d=u.exports,p=n("9225"),h=n("c0d6"),m=n("41cb"),f=n("bc3a"),b=n.n(f),g=n("5f72"),k=n.n(g);let y={};const w=b.a.create(y);w.interceptors.request.use((function(e){return e}),(function(e){return Promise.reject(e)})),w.interceptors.response.use((function(e){return e.data}),(function(e){if(b.a.isCancel(e))return Promise.reject(e.message?e.message:"Request canceled");if(e.response&&401==e.response.status)return window.location="/moreu/signin",Promise.reject("invalid login status");let t=e.message;return e.response&&e.response.data.msg&&(t=e.response.data.msg),g["Notification"].error(t),Promise.reject(e)})),Plugin.install=function(e,t){e.axios=w,window.axios=w,Object.defineProperties(e.prototype,{axios:{get(){return w}},$axios:{get(){return w}}})},r.a.use(Plugin);Plugin;var v=n("c32d"),S=n.n(v);r.a.prototype.$moment=S.a,r.a.filter("moment",(function(e,t){return t=t||"YYYY-MM-DD HH:mm:ss",S()(e).format(t)})),String.prototype.moment||(String.prototype.moment=function(e){return e=e||"YYYY-MM-DD HH:mm:ss",S()(this).format(e)});n("0fae");r.a.use(k.a);var x=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{height:"100%"}},[n("el-row",{staticClass:"header"},[n("el-breadcrumb",{staticClass:"bread",attrs:{"separator-class":"el-icon-arrow-right"}},e._l(e.breadcrumb,(function(t){return n("el-breadcrumb-item",{key:t.dir,attrs:{index:t.dir,to:e.buildQuery(t.dir)}},[e._v(e._s(t.name))])})),1),n("span",{staticClass:"loadtips",staticStyle:{float:"right"}},[e._v(e._s(e.loadedtips))])],1),"grid"==e.layout?n("GridExplorer",{attrs:{loading:e.loading,moreButtons:e.moreButtons},on:{"on-click":e.onClick},model:{value:e.rows,callback:function(t){e.rows=t},expression:"rows"}}):n("ListExplorer",{attrs:{loading:e.loading,rowButtons:e.rowButtons,moreButtons:e.moreButtons},on:{"on-click":e.onClick,"scroll-end":e.onScrollEnd,"selection-change":e.onSelectionChange},model:{value:e.rows,callback:function(t){e.rows=t},expression:"rows"}})],1)},C=[],P=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"explorer"},e._l(e.data,(function(t){return n("div",{key:t.alias,staticClass:"explorer-item",on:{click:function(n){return e.onNameClick(t)}}},[t.dirtype?n("i",{staticClass:"matter-icon el-icon-folder",staticStyle:{color:"#ffc402"}}):n("i",{class:"iconfont "+e.type2icon(t.type)}),n("p",[e._v(e._s(t.name))])])})),0)},$=[];const _={props:{value:Array,loading:!1,rowButtons:Array,moreButtons:Array},data(){return{data:[]}},watch:{value(e,t){this.data=e}},methods:{isOfficeFile(e){let t=["application/msword","application/vnd.ms-excel","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.openxmlformats-officedocument.presentationml.presentation"];return t.includes(e)},officeIcon(e){let t=["application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],n=["application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],a=["application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation"];return t.includes(e)?"icon-doc":n.includes(e)?"icon-excel":a.includes(e)?"icon-ppt":void 0},type2icon(e){console.log(e);let[t,n]=e.split("/"),a=["pdf","html","xml","psd","rtf"];if(a.includes(n))return"icon-"+n;let r=["json","yaml","x-yaml"];if(r.includes(n))return"icon-html";let o=["zip","x-gzip"];if(o.includes(n))return"icon-compressed-file";if(this.isOfficeFile(e))return this.officeIcon(e);let s=["audio","video","image","text"];return s.includes(t)?"icon-"+t:"icon-file"},onNameClick(e){e.dirtype?this.$emit("on-click","folder",e):e.type.endsWith("pdf")?this.$emit("on-click","pdf",e):e.type.startsWith("text")?this.$emit("on-click","text",e):e.type.startsWith("image")?this.$emit("on-click","image",e):e.type.startsWith("audio")||e.type.startsWith("video")?this.$emit("on-click","media",e):this.isOfficeFile(e.type)&&this.$emit("on-click","doc",e)}}};var E=_,O={mixins:[E],data(){return{}},methods:{onSelectionChange(e){this.$emit("selection-change",e)},onSelectable(e,t){if(!e.dirtype)return!0},handleCommand(e){e.action(e.row)},onScrollEnd(){this.$emit("scroll-end")}}},B=O,D=(n("ac82"),Object(l["a"])(B,P,$,!1,null,"27e97df8",null)),j=D.exports,N=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"},{name:"el-table-infinite-scroll",rawName:"v-el-table-infinite-scroll",value:e.onScrollEnd,expression:"onScrollEnd"}],staticStyle:{width:"100%"},attrs:{height:"100%","tooltip-effect":"dark",size:"small",data:e.data,"highlight-current-row":""},on:{"selection-change":e.onSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"30",selectable:e.onSelectable}}),n("el-table-column",{attrs:{prop:"name",label:e.$t("fth.name"),"min-width":"200","show-overflow-tooltip":"",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.dirtype?n("i",{staticClass:"matter-icon el-icon-folder",staticStyle:{color:"#ffc402"}}):n("i",{class:"iconfont matter-icon "+e.type2icon(t.row.type)}),n("el-link",{staticClass:"matter-title",attrs:{underline:!1,href:"Javascript: void(0);"}},[n("span",{on:{click:function(n){return e.onNameClick(t.row)}}},[e._v(e._s(t.row.name))])])]}}])}),n("el-table-column",{attrs:{width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",{staticClass:"operation",staticStyle:{float:"right","vertical-align":"super"}},[e._l(e.rowButtons,(function(e){return n("el-link",{directives:[{name:"show",rawName:"v-show",value:!e.shown||e.shown(t.row),expression:"!item.shown || item.shown(scope.row)"}],key:e.name,attrs:{type:"primary",underline:!1}},[n("i",{class:e.icon+" el-icon--right",on:{click:function(n){return e.action(t.row)}}})])})),n("el-dropdown",{directives:[{name:"show",rawName:"v-show",value:e.moreButtons&&e.moreButtons.length>0,expression:"moreButtons && moreButtons.length > 0"}],attrs:{trigger:"click"},on:{command:e.handleCommand}},[n("el-link",{staticClass:"el-dropdown-link",attrs:{type:"primary",underline:!1}},[n("i",{staticClass:"el-icon-more el-icon--right"})]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.moreButtons,(function(a){return n("el-dropdown-item",{key:a.name,attrs:{command:{action:a.action,row:t.row}}},[e._v("\n              "+e._s(a.title)+"\n            ")])})),1)],1)],2)]}}])}),n("el-table-column",{attrs:{prop:"size",label:e.$t("fth.size"),width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.dirtype?n("div",[e._v("-")]):n("div",[e._v(e._s(t.row.size))])]}}])}),n("el-table-column",{attrs:{prop:"updated",label:e.$t("fth.updated"),width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("moment")(t.row.updated)))]}}])})],1)},M=[],z=n("521e"),U={mixins:[E],directives:{"el-table-infinite-scroll":z["a"]},data(){return{}},methods:{onSelectionChange(e){this.$emit("selection-change",e)},onSelectable(e,t){if(!e.dirtype)return!0},handleCommand(e){e.action(e.row)},onScrollEnd(){this.$emit("scroll-end")}}},L=U,A=(n("ed92"),Object(l["a"])(L,N,M,!1,null,"b4e2310a",null)),R=A.exports,T={components:{GridExplorer:j,ListExplorer:R},props:{layout:{type:String,default:"list"},dataLoader:Function,linkLoader:Function,rowButtons:Array,moreButtons:Array,rootDir:{type:String,default:""}},data(){return{currentDir:"",loading:!1,offset:0,limit:100,rows:[],total:0,selection:Array}},watch:{$route:"onRouteChange",layout(e,t){e!=t&&this.listRefresh()}},computed:{breadcrumb(){let e=[{name:this.$t("ft.breadcrumb"),dir:""}];if(!this.currentDir)return e;let t="";return this.currentDir.split("/").forEach(n=>{""!=n&&(e.push({name:n,dir:t+n+"/"}),t+=n+"/")}),e},loadedtips(){let e=this.rows.length;return e==this.total?`已全部加载，共${this.total}个`:`已加载${e}个，共${this.total}个`}},methods:{onRouteChange(e,t){this.currentDir!=e.query.dir&&(this.currentDir=e.query.dir),this.listRefresh()},onSelectionChange(e){this.$emit("selection-change",e)},onScrollEnd(){0==this.total||this.rows.length!=this.total?this.listRefresh(this.offset,this.limit):console.log("no more")},listRefresh(e,t){e||(e=0),t||(t=this.limit),this.loading=!0;let n=this.currentDir?this.currentDir:"";this.dataLoader(n,e,t).then(n=>{0==e?(this.rows=n.list,this.offset=t):(this.rows=this.rows.concat(n.list),this.offset+=this.limit),this.total=n.total,this.loading=!1})},buildQuery(e){e.startsWith(this.rootDir)&&(e=e.replace(this.rootDir,""));let t=e?{dir:e}:{};return{query:t}},onClick(e,t){"folder"!=e?this.linkLoader(t).then(n=>{this.$emit("file-open",e,t,n)}):this.$router.push(this.buildQuery(t.fullpath))}},mounted(){this.currentDir=this.$route.query.dir?this.$route.query.dir:""}},F=T,q=(n("636f"),Object(l["a"])(F,x,C,!1,null,"72354125",null)),I=q.exports;const Y={FileExplorer:I},H=function(e,t){Object.keys(Y).forEach(t=>{e.component(t,Y[t])})};var K=H;r.a.use(K);var Q=n("b311"),W=n.n(Q);r.a.prototype.$clipboard=new W.a(".copy-link");n("2dfc");var G=n("afa7");r.a.use(G["a"],{plyr:{},emit:["ended"]});var V=n("ee2d"),J=n.n(V),Z=(n("fefe"),n("603a")),X=n.n(Z),ee=(n("fbc4"),n("1487")),te=n.n(ee);J.a.use(X.a,{Hljs:te.a}),r.a.use(J.a);let ne={baseURL:"/api"};const ae=b.a.create(ne);ae.interceptors.response.use((function(e){return e.data}),(function(e){if(e.response&&401==e.response.status)return window.location="/u/signin",Promise.reject("invalid login status");if(e.response&&520==e.response.status)return Promise.reject(e);let t=e.message;return e.response&&e.response.data.msg&&(t=e.response.data.msg),"get"!=e.response.config.method&&g["Notification"].error(t),Promise.reject(e)}));const re=b.a;var oe=ae;class se{installDatabase(e){return oe.put("/system/database",e)}createAdministrator(e){return oe.put("/system/account",e)}optGet(e){return oe.get("/system/options/"+e)}optSave(e,t){return oe.put("/system/options/"+e,t)}matterPathEnvs(){return oe.get("/system/matter-path-envs")}providers(){return oe.get("/system/providers")}}var ie=se;class ce{signup(e){return oe.post("/users",e)}activate(e,t){let n={token:t,activated:!0};return oe.patch("/users/"+e,n)}applyPasswordReset(e){let t={email:e};return oe.post("/tokens",t)}passwordReset(e,t,n){let a={token:t,password:n};return oe.patch("/users/"+e,a)}signin(e){return oe.post("/tokens",e)}signout(){return oe.delete("/tokens")}profileGet(){return oe.get("/user")}updateProfile(e){return oe.put("/user/profile",e)}updatePassword(e){return oe.put("/user/password",e)}list(e){return oe.get("/users",{params:e})}find(e){return oe.get("/users/"+e)}delete(e){return oe.delete("/users/"+e)}updatePasswordByUser(e,t){return oe.put(`/users/${e}/password`,t)}updateStorageByUser(e,t){return oe.put(`/users/${e}/storage`,t)}updateStatusByUser(e,t){return oe.put(`/users/${e}/status`,t)}}var le=ce;class ue{create(e){return oe.post("/user/keys",{name:e})}list(e){return oe.get("/user/keys",{params:e})}find(e){return oe.get("/user/keys/"+e)}delete(e){return oe.delete("/user/keys/"+e)}resetSecret(e,t){return oe.patch(`/user/keys/${e}/secret`,t)}}var de=ue;class pe{list(e){return oe.get("/storages",{params:e})}find(e){return oe.get("/storages/"+e)}create(e){return oe.post("/storages",e)}update(e){return oe.put("/storages/"+e.id,e)}delete(e){return oe.delete("/storages/"+e)}}var he=pe,me=n("add0"),fe=n("90fe");function be(e,t){const n=t.map(e=>e.toLowerCase());return Object.fromEntries(Object.entries(e).filter(([e])=>-1==n.indexOf(e.toLowerCase())))}function*ge(e,t){const n={type:e.type,lastModified:e.lastModified};let a=0,r=1;while(a<e.size){const o=e.slice(a,a+t);yield[r,new File([o],e.name,n)],a+=t,r+=1}}function ke(e,t){return Promise.resolve(t()).catch(n=>0==e?Promise.reject(n):ke(e-1,t))}function ye(e,t,n){const a=(new Date).valueOf();let r=0;return function(){r<e&&(r+=1);const o=r/e,s=(new Date).valueOf()-a;n({progress:(100*o).toFixed(2),speed:o*t/s*1e3})}}class we{constructor(){this.sem=new me["Semaphore"](10),this.retry=3,this.chunkSize=1e7}createDir(e,t,n){return oe.post("/matters",{sid:e,name:t,dir:n,is_dir:!0})}create(e,t,n,a){const r={sid:e,name:n.name,type:n.type,size:n.size,dir:t};return ke(this.retry,()=>re.post("/api/matters",r)).then(e=>{const t=e.data.data;return!0===t.multipart?this.createMultipart(t,n,a):this.createSimple(t,n,a)}).catch(e=>{const t=e.response&&e.response.data.msg||e.message;g["Notification"].error(t),Promise.reject(e)})}createSimple(e,t,n){const{uplink:a,headers:r}=e,o=e.matter.alias,s=ye(1,t.size,n);return re.put(a,t.file,{headers:be(r,["content-length"])}).then(()=>ke(this.retry,()=>re.patch(`/api/matters/${o}/done`))).then(()=>s())}createMultipart(e,t,n){const a=e.matter.alias,r=e.upload_id,o=Math.ceil(t.size/this.chunkSize),s=ye(o,t.size,n),i=ge(t.file,this.chunkSize),c=[];for(let l=0;l<o;l++)c.push(this.sem.use(()=>{const{done:e,value:t}=i.next();if(e)return Promise.reject(new Error("out of file bound"));const[n,o]=t;return this.uploadPart(o,a,r,n,o.size).then(e=>(s(),e))}));return Promise.all(c).then(e=>this.uploadMultipartDone(a,r,e))}uploadPart(e,t,n,a,r){const o={upload_id:n,number:a,size:r};return ke(this.retry,()=>re.patch(`/api/matters/${t}/part`,o).then(({data:{data:{uplink:t,headers:n}}})=>re.put(t,e,{headers:be(n,["content-length"])})).then(({headers:{etag:e}})=>({etag:e,number:a})))}uploadMultipartDone(e,t,n){const a={upload_id:t,parts:n};return ke(this.retry,()=>re.patch(`/api/matters/${e}/done/multipart`,a))}get(e){return new Promise((t,n)=>{oe.get("/matters/"+e).then(e=>{t(e.data)}).catch(n)})}download(e){return new Promise((t,n)=>{this.get(e).then(e=>{fe["a"].download(e.name,e.url).then(()=>{t(e)}).catch(n)})})}list(e){return new Promise((t,n)=>{oe.get("/matters",{params:e}).then(e=>{let n=e.data;n.list=n.list.map(e=>(e.size=fe["a"].formatBytes(e.size,1),e.fullpath=`${e.parent}${e.name}`,e.dirtype&&(e.fullpath+="/"),e)),t(n)}).catch(n)})}rename(e,t){return oe.patch(`/matters/${e}/name`,{name:t})}move(e,t){return oe.patch(`/matters/${e}/location`,{dir:t})}copy(e,t){return oe.patch(`/matters/${e}/duplicate`,{path:t})}delete(e){return oe.delete("/matters/"+e)}save(e,t){return new Promise((n,a)=>{oe.get(`/matters/${e}/ulink`).then(r=>{let o=r.data;re.put(o.link,t,{headers:o.headers}).then(()=>{oe.patch(`/matters/${e}/done`).then(e=>{n(e.data)})}).catch(a)}).catch(a)})}}var ve=we;class Se{list(e){return oe.get("/shares",{params:e})}find(e){return oe.get("/shares/"+e)}create(e){return oe.post("/shares",e)}remove(e){return oe.delete("/shares/"+e)}draw(e,t){return oe.post(`/shares/${e}/token`,{secret:t})}findMatter(e){return oe.get(`/shares/${e}/matter`)}listMatters(e,t){return oe.get(`/shares/${e}/matters`,{params:t})}}var xe=Se;class Ce{list(e){return new Promise((t,n)=>{oe.get("/recycles",{params:e}).then(e=>{let n=e.data;t(n)}).catch(n)})}recovery(e){return oe.put("/recycles/"+e)}delete(e){return oe.delete("/recycles/"+e)}clean(e){return oe.delete("/recycles",{params:{sid:e}})}}var Pe=Ce;const $e=new ie,_e=new le,Ee=new de,Oe=new he,Be=new ve,De=new xe,je=new Pe;var Ne={System:$e,User:_e,UserKey:Ee,Storage:Oe,File:Be,Share:De,Recyclebin:je};const Me={install:function(e,t){e.zpan=Ne,window.zpan=Ne,Object.defineProperties(e.prototype,{zpan:{get(){return Ne}},$zpan:{get(){return Ne}}})}};r.a.use(Me);r.a.config.productionTip=!1,new r.a({i18n:p["a"],router:m["a"],store:h["a"],render:e=>e(d)}).$mount("#app")},5880:function(e,t){e.exports=Vuex},"5f72":function(e,t){e.exports=ELEMENT},"636f":function(e,t,n){"use strict";n("c835")},6389:function(e,t){e.exports=VueRouter},"64a9":function(e,t,n){},"8bbf":function(e,t){e.exports=Vue},"90fe":function(e,t,n){"use strict";var a=n("bc3a"),r=n.n(a);let o={upload(e,t,n,a){let o=e.file;return new Promise((s,i)=>{const c=r.a.CancelToken;let l={headers:n,cancelToken:new c(a),onUploadProgress:function(t){o.percent=t.loaded/t.total*100,e.onProgress&&e.onProgress(o)}};window.axios.put(t,o,l).then(t=>{e.onSuccess&&e.onSuccess(),s(t)}).catch(i)})},download(e,t){return new Promise((n,a)=>{var r=document.createElement("a");r.href=t,r.download=e,r.click(),n()})},formatBytes(e,t){if(0==e)return"0 Bytes";var n=1024,a=t+1||3,r=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],o=Math.floor(Math.log(e)/Math.log(n));return parseFloat((e/Math.pow(n,o)).toFixed(a))+" "+r[o]},setupPasteUpload(e){document.addEventListener("paste",t=>{let n=null;if((t.clipboardData||t.originalEvent)&&(n=t.clipboardData||t.originalEvent.clipboardData),n&&n.items){t.preventDefault();let a=n.items[0];if(!a.type.startsWith("image"))return;let r=a.getAsFile(),o=r.name.replace("image",(new Date).getTime());e({file:r,filename:o})}})},bytesUnits(){const e=1024,t=1024*e,n=1024*t,a=1024*n,r=1024*a,o=[{label:"KB",value:e},{label:"MB",value:t},{label:"GB",value:n},{label:"TB",value:a},{label:"PB",value:r}];return o},formatBytes2(e,t){let n={num:0,unitLabel:"Bytes",unitValue:0,format(){return`${n.num} ${n.unitLabel}`}};if(!e)return n;let a=e,r=0;for(;a>=1024;r++)a/=1024;let o=t+1||3;return n.num=parseFloat(a).toFixed(o),n.unitLabel=this.bytesUnits()[r-1].label,n.unitValue=this.bytesUnits()[r-1].value,Object.assign({},n)}};t["a"]=o},9225:function(e,t,n){"use strict";n.d(t,"b",(function(){return u}));var a=n("8bbf"),r=n.n(a),o=n("a925");r.a.use(o["a"]);const s="zpan-locale",i=n("49f8");function c(){const e={};return i.keys().forEach(t=>{const n=t.match(/([A-Za-z0-9-_]+)\./i);if(n&&n.length>1){const a=n[1];e[a]=i(t)}}),e}const l=new o["a"]({locale:"en",fallbackLocale:"en",messages:c()}),u=e=>{let t=localStorage.getItem(s);e?(t=e,localStorage.setItem(s,t)):t||(t=navigator.language),r.a.config.locale=t,l.locale=t};u(),t["a"]=l},ac82:function(e,t,n){"use strict";n("338e")},c0d6:function(e,t,n){"use strict";var a=n("8bbf"),r=n.n(a),o=n("5880"),s=n.n(o);r.a.use(s.a);const i={namespaced:!0,state:()=>({successCount:0,dirUploadSupport:!1}),mutations:{uploadSuccess(e){e.successCount+=1},dirUploadSupport(e,t){e.dirUploadSupport=t}}};t["a"]=new s.a.Store({state:{storages:[],cs:{}},mutations:{storages(e,t){e.storages=t},cs(e,t){e.cs=t}},actions:{},modules:{uploader:i}})},c32d:function(e,t){e.exports=moment},c835:function(e,t,n){},ed92:function(e,t,n){"use strict";n("14ee")},edd4:function(e){e.exports=JSON.parse('{"click-copy-link":"Click copy link","copy-link":"Copy Link","create-folder":"New Folder","day":"Days","op":{"close":"Close","confirm":"Confirm","cancel":"Cancel","enable":"Enable","disable":"Disable","rename":"Rename","delete":"Delete","batch-delete":"Batch Delete"},"msg":{"success":"Success","failed":"Failed","batch-delete-success":"Batch deleted!","create-success":"Created!","delete-success":"Deleted!","move-success":"Moved!","copy-success":"Copied!","copy-failed":"Copy failed","rename-success":"Renamed!","save-success":"Saved!","clean-success":"Cleaned!","recovery-success":"Recoveried!"},"dialog":{"moveto-title":"MoveTo","outlink-title":"Outlink","share-drawcode":"Draw Code","share-drawcode-switch":"Protect","share-expire-time":"Expire Time","share-link":"Link Address","share-title":"Share Link","upload-click":"click to upload","upload-tips":"Drag the file here, or","upload-title":"Upload Queue"},"disk":{"delete":"Delete","download":"Download","folder":"New Folder","upload":"Upload"},"ft":{"breadcrumb":"All files"},"ftb":{"move":"MoveTo","remove":"Remove","rename":"Rename"},"fth":{"name":"Name","size":"Size","updated":"LastUpdated"},"leftnav":{"audio":"Audios","doc":"Documents","files":"All Files","image":"Pictures","share":"Shares","recyclebin":"Recycle Bin","storage":"Storage","video":"Videos"},"share":{"auto-download-tips":"Your file has started downloading, if it has not started, please click here to try again","created":"ShareTime","drawcode":"DrawCode","drawcode-placeholder":"Please input your draw code","drawfile":"Draw","expired":"ExpireTime","link":"ShareLink","name":"Name"},"recyclebin":{"recovery":"Recover file(s)?","delete":"Delete forever?","clean":"Empty the recycle bin"},"tips":{"batch-delete":"This operation will permanently delete the selected files, do you want to continue?","create-folder":"Please input folder name","remove":"This operation will permanently delete the file, do you want to continue?","rename":"Please input newly name","recyclebin":"Tip: The recycle bin also occupies the network disk space, please clean it up in time~","recovery":"Are you sure you want to recover the selected file(s)?","delete":"Deleted files cannot be recovered, are you sure you want to permanently delete the selected file(s)?","clean":"Are you sure to empty the Recycle Bin?","deleting":"Deleting..."},"topbar":{"netdisk":"Netdisk","imghosting":"Image Hosting","search":"Searching...","profile":"Profile","settings":"Settings","s-platform":"Manage Panel","signout":"Sign out"},"title":{"disk":"My Files","share":"My Shares","recyclebin":"Recycle Bin","picture":"Image Hosting","storage-quota":"Storage Quota"},"year":"Years","admin":{"search-placeholder":"Input the email...","storage-search-placeholder":"Input the storage...","btn-user-add":"Add User","btn-quota-update":"Change Quota","btn-storage-add":"Create Storage","btn-edit":"Edit","label-nickname":"Nickname","label-email":"Email","label-role":"Role","label-status":"Status","label-storage":"Quota","label-operation":"Operation","label-quota":"Storage Quota","label-quota-change":"Quota Change","label-password-reset":"Password Reset","label-storage-manager":"Storage","label-name":"Name","label-title":"Label","label-intro":"Intro","label-bucket":"Bucket","label-endpoint":"Endpoint","label-region":"Region","label-custom_host":"CustomHost","label-access_key":"AccessKey","label-secret_key":"SecretKey"},"cloudplatform":{"COS":"TencentCloud","KODO":"QiniuCloud","MINIO":"Self-hosted","NOS":"Netease","OBS":"HuaweiCloud","OSS":"AliyunCloud","S3":"AWSCloud","US3":"UColud","USS":"UPYun"},"uploader":{"file":"Upload file","folder":"Upload folder","new-folder":"New folder","upload-in-progress":"In progress","upload-done":"Done","no-tasks":"No upload tasks","upload-hint":"Recent tasks only, Refresh to clear"}}')}});